{"version":3,"names":["GET","cov_2j63vubub1","f","s","handler","POST","authOptions","adapter","_prismaadapter","PrismaAdapter","_prisma","prisma","providers","_google","default","clientId","process","env","GOOGLE_CLIENT_ID","clientSecret","GOOGLE_CLIENT_SECRET","callbacks","session","token","b","user","id","sub","jwt","account","pages","signIn","error","strategy","maxAge","cookies","sessionToken","name","options","httpOnly","sameSite","path","secure","NODE_ENV","debug","_next"],"sources":["/Users/kennyc/code/personal/nailit/app/api/auth/[...nextauth]/route.ts"],"sourcesContent":["import { NextAuthOptions } from \"next-auth\"\nimport NextAuth from \"next-auth/next\"\nimport GoogleProvider from \"next-auth/providers/google\"\nimport { PrismaAdapter } from \"@auth/prisma-adapter\"\nimport { prisma } from \"../../../lib/prisma\"\n\ndeclare module \"next-auth\" {\n  interface Session {\n    user: {\n      id: string;\n      name?: string | null;\n      email?: string | null;\n      image?: string | null;\n    }\n  }\n}\n\nexport const authOptions: NextAuthOptions = {\n  adapter: PrismaAdapter(prisma),\n  providers: [\n    GoogleProvider({\n      clientId: process.env.GOOGLE_CLIENT_ID!,\n      clientSecret: process.env.GOOGLE_CLIENT_SECRET!,\n    }),\n  ],\n  callbacks: {\n    async session({ session, token }) {\n      // For JWT sessions, get user ID from token\n      if (token && session?.user) {\n        session.user.id = token.sub!;\n      }\n      return session;\n    },\n    async jwt({ token, user, account }) {\n      // On first sign in, get user ID from database\n      if (user) {\n        token.sub = user.id;\n      }\n      return token;\n    },\n  },\n  pages: {\n    signIn: \"/auth/signin\",\n    error: \"/auth/error\",\n  },\n  session: {\n    strategy: \"jwt\", // Use JWT for better serverless compatibility\n    maxAge: 30 * 24 * 60 * 60, // 30 days\n  },\n  cookies: {\n    sessionToken: {\n      name: `next-auth.session-token`,\n      options: {\n        httpOnly: true,\n        sameSite: 'lax',\n        path: '/',\n        secure: process.env.NODE_ENV === 'production'\n      }\n    },\n  },\n  debug: process.env.NODE_ENV === \"development\",\n}\n\nconst handler = NextAuth(authOptions)\n\nexport { handler as GET, handler as POST } "],"mappings":"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","ignoreList":[]}