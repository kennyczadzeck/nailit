a8e651004e9e32120d6d811aecc5ce9a
/**
 * Feature: Project Creation
 * All project creation related tests (BDD, integration, unit)
 * Based on NailedIt MVP Product Requirements - Create New Project
 */ "use strict";
// Mock NextAuth and Router
jest.mock('next-auth/react', ()=>({
        useSession: jest.fn()
    }));
jest.mock('next/navigation', ()=>({
        useRouter: jest.fn()
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_default(require("react"));
const _react1 = require("@testing-library/react");
const _react2 = require("next-auth/react");
const _navigation = require("next/navigation");
const _fixtures = require("../../fixtures");
const _testUtils = require("../../helpers/testUtils");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
// Mock fetch globally
global.fetch = jest.fn();
describe('Feature: Project Creation', ()=>{
    const mockUseSession = _react2.useSession;
    const mockUseRouter = _navigation.useRouter;
    const mockFetch = fetch;
    beforeEach(()=>{
        jest.clearAllMocks();
        const mockRouter = _testUtils.routerHelpers.createMockRouter();
        mockUseRouter.mockReturnValue(mockRouter);
        mockUseSession.mockReturnValue({
            data: {
                user: _fixtures.testUsers.john
            },
            status: 'authenticated',
            update: jest.fn()
        });
    });
    /**
   * BDD Tests: User Story Implementation
   */ describe('BDD: User Stories', ()=>{
        _testUtils.bddHelpers.userStory('Project Name (US-04)', ()=>{
            test('Given I want to create new project, When I enter project name that reflects scope, Then project is created with that name', async ()=>{
                // Given: I want to create a new project
                const MockProjectForm = ()=>{
                    const [name, setName] = _react.default.useState('');
                    const [isSubmitting, setIsSubmitting] = _react.default.useState(false);
                    const handleSubmit = async (e)=>{
                        e.preventDefault();
                        setIsSubmitting(true);
                        try {
                            const response = await fetch('/api/projects', {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json'
                                },
                                body: JSON.stringify({
                                    name,
                                    contractor: 'Test Contractor'
                                })
                            });
                            if (response.ok) {
                                const router = _testUtils.routerHelpers.createMockRouter();
                                router.push('/projects/new-project-123');
                            }
                        } finally{
                            setIsSubmitting(false);
                        }
                    };
                    return /*#__PURE__*/ (0, _jsxruntime.jsxs)("form", {
                        onSubmit: handleSubmit,
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("input", {
                                type: "text",
                                placeholder: "Enter project name that reflects the project's scope",
                                value: name,
                                onChange: (e)=>setName(e.target.value),
                                required: true
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                                type: "submit",
                                disabled: isSubmitting,
                                children: isSubmitting ? 'Creating...' : 'Create Project'
                            })
                        ]
                    });
                };
                // Mock successful API response using centralized fixtures
                mockFetch.mockResolvedValue(_testUtils.apiHelpers.createMockResponse({
                    id: 'new-project-123',
                    name: _fixtures.testProjects.kitchenReno.name,
                    contractor: 'Test Contractor',
                    redirectUrl: '/projects/new-project-123'
                }, 201));
                (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(MockProjectForm, {}));
                // When: I enter a project name that reflects the project's scope
                const nameInput = _react1.screen.getByPlaceholderText(/Enter project name/);
                _react1.fireEvent.change(nameInput, {
                    target: {
                        value: _fixtures.testProjects.kitchenReno.name
                    }
                });
                const submitButton = _react1.screen.getByRole('button', {
                    name: /Create Project/
                });
                _react1.fireEvent.click(submitButton);
                // Then: the project should be created with that name
                await (0, _react1.waitFor)(()=>{
                    expect(mockFetch).toHaveBeenCalledWith('/api/projects', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            name: _fixtures.testProjects.kitchenReno.name,
                            contractor: 'Test Contractor'
                        })
                    });
                });
            });
        });
        _testUtils.bddHelpers.userStory('Add General Contractor (US-05)', ()=>{
            test('Given I am creating project, When I add general contractor, Then contractor is associated with project', async ()=>{
                // Given: I am creating a project
                const MockContractorForm = ()=>{
                    const [contractor, setContractor] = _react.default.useState('');
                    const [isSubmitting, setIsSubmitting] = _react.default.useState(false);
                    const handleSubmit = async (e)=>{
                        e.preventDefault();
                        setIsSubmitting(true);
                        const response = await fetch('/api/projects', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                name: _fixtures.testProjects.kitchenReno.name,
                                contractor
                            })
                        });
                        setIsSubmitting(false);
                    };
                    return /*#__PURE__*/ (0, _jsxruntime.jsxs)("form", {
                        onSubmit: handleSubmit,
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("input", {
                                type: "text",
                                placeholder: "General contractor name (required)",
                                value: contractor,
                                onChange: (e)=>setContractor(e.target.value),
                                required: true
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                                type: "submit",
                                disabled: isSubmitting,
                                children: isSubmitting ? 'Adding...' : 'Add Contractor'
                            })
                        ]
                    });
                };
                mockFetch.mockResolvedValue(_testUtils.apiHelpers.createMockResponse({
                    id: 'new-project-123',
                    name: _fixtures.testProjects.kitchenReno.name,
                    contractor: _fixtures.testProjects.kitchenReno.contractor
                }, 201));
                (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(MockContractorForm, {}));
                // When: I add a general contractor
                const contractorInput = _react1.screen.getByPlaceholderText(/General contractor name/);
                _react1.fireEvent.change(contractorInput, {
                    target: {
                        value: _fixtures.testProjects.kitchenReno.contractor
                    }
                });
                const submitButton = _react1.screen.getByRole('button', {
                    name: /Add Contractor/
                });
                _react1.fireEvent.click(submitButton);
                // Then: the contractor should be associated with the project
                await (0, _react1.waitFor)(()=>{
                    expect(mockFetch).toHaveBeenCalledWith('/api/projects', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            name: _fixtures.testProjects.kitchenReno.name,
                            contractor: _fixtures.testProjects.kitchenReno.contractor
                        })
                    });
                });
            });
        });
        _testUtils.bddHelpers.userStory('Add Architect/Designer (US-06)', ()=>{
            test('Given I am creating project, When I optionally add architect, Then architect is included in project', async ()=>{
                // Given: I am creating a project
                const MockArchitectForm = ()=>{
                    const [architect, setArchitect] = _react.default.useState('');
                    const handleSubmit = async (e)=>{
                        e.preventDefault();
                        await fetch('/api/projects', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                name: _fixtures.testProjects.kitchenReno.name,
                                contractor: _fixtures.testProjects.kitchenReno.contractor,
                                architect: architect || undefined
                            })
                        });
                    };
                    return /*#__PURE__*/ (0, _jsxruntime.jsxs)("form", {
                        onSubmit: handleSubmit,
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("input", {
                                type: "text",
                                placeholder: "Architect/Designer (optional)",
                                value: architect,
                                onChange: (e)=>setArchitect(e.target.value)
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                                type: "submit",
                                children: "Add to Project"
                            })
                        ]
                    });
                };
                mockFetch.mockResolvedValue(_testUtils.apiHelpers.createMockResponse({
                    id: 'new-project-123',
                    name: _fixtures.testProjects.kitchenReno.name,
                    contractor: _fixtures.testProjects.kitchenReno.contractor,
                    architect: _fixtures.testProjects.kitchenReno.architect
                }, 201));
                (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(MockArchitectForm, {}));
                // When: I optionally add an architect
                const architectInput = _react1.screen.getByPlaceholderText(/Architect\/Designer/);
                _react1.fireEvent.change(architectInput, {
                    target: {
                        value: _fixtures.testProjects.kitchenReno.architect
                    }
                });
                const submitButton = _react1.screen.getByRole('button', {
                    name: /Add to Project/
                });
                _react1.fireEvent.click(submitButton);
                // Then: the architect should be included in the project
                await (0, _react1.waitFor)(()=>{
                    expect(mockFetch).toHaveBeenCalledWith('/api/projects', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            name: _fixtures.testProjects.kitchenReno.name,
                            contractor: _fixtures.testProjects.kitchenReno.contractor,
                            architect: _fixtures.testProjects.kitchenReno.architect
                        })
                    });
                });
            });
            test('Given I am creating project, When I skip adding architect, Then project is created without architect', async ()=>{
                // Given: I am creating a project and skip architect
                const MockSkipArchitectForm = ()=>{
                    const handleSubmit = async (e)=>{
                        e.preventDefault();
                        await fetch('/api/projects', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                name: _fixtures.testProjects.kitchenReno.name,
                                contractor: _fixtures.testProjects.kitchenReno.contractor,
                                architect: undefined
                            })
                        });
                    };
                    return /*#__PURE__*/ (0, _jsxruntime.jsxs)("form", {
                        onSubmit: handleSubmit,
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("input", {
                                type: "text",
                                placeholder: "Architect/Designer (optional)"
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                                type: "submit",
                                children: "Skip Architect"
                            })
                        ]
                    });
                };
                mockFetch.mockResolvedValue(_testUtils.apiHelpers.createMockResponse({
                    id: 'new-project-123',
                    name: _fixtures.testProjects.kitchenReno.name,
                    contractor: _fixtures.testProjects.kitchenReno.contractor
                }, 201));
                (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(MockSkipArchitectForm, {}));
                // When: I skip adding an architect
                const submitButton = _react1.screen.getByRole('button', {
                    name: /Skip Architect/
                });
                _react1.fireEvent.click(submitButton);
                // Then: the project should be created without an architect
                await (0, _react1.waitFor)(()=>{
                    expect(mockFetch).toHaveBeenCalledWith('/api/projects', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            name: _fixtures.testProjects.kitchenReno.name,
                            contractor: _fixtures.testProjects.kitchenReno.contractor,
                            architect: undefined
                        })
                    });
                });
            });
        });
        _testUtils.bddHelpers.userStory('Add Project Manager (US-07)', ()=>{
            test('Given I am creating project, When I optionally add project manager, Then PM is included in project', async ()=>{
                // Given: I am creating a project  
                const MockPMForm = ()=>{
                    const [projectManager, setProjectManager] = _react.default.useState('');
                    const handleSubmit = async (e)=>{
                        e.preventDefault();
                        await fetch('/api/projects', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                name: _fixtures.testProjects.deckAddition.name,
                                contractor: _fixtures.testProjects.deckAddition.contractor,
                                projectManager: projectManager || undefined
                            })
                        });
                    };
                    return /*#__PURE__*/ (0, _jsxruntime.jsxs)("form", {
                        onSubmit: handleSubmit,
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("input", {
                                type: "text",
                                placeholder: "Project Manager (optional)",
                                value: projectManager,
                                onChange: (e)=>setProjectManager(e.target.value)
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                                type: "submit",
                                children: "Add PM to Project"
                            })
                        ]
                    });
                };
                mockFetch.mockResolvedValue(_testUtils.apiHelpers.createMockResponse({
                    id: 'new-project-123',
                    name: _fixtures.testProjects.deckAddition.name,
                    contractor: _fixtures.testProjects.deckAddition.contractor,
                    projectManager: _fixtures.testProjects.deckAddition.projectManager
                }, 201));
                (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(MockPMForm, {}));
                // When: I optionally add a project manager
                const pmInput = _react1.screen.getByPlaceholderText(/Project Manager/);
                _react1.fireEvent.change(pmInput, {
                    target: {
                        value: _fixtures.testProjects.deckAddition.projectManager
                    }
                });
                const submitButton = _react1.screen.getByRole('button', {
                    name: /Add PM to Project/
                });
                _react1.fireEvent.click(submitButton);
                // Then: the project manager should be included in the project
                await (0, _react1.waitFor)(()=>{
                    expect(mockFetch).toHaveBeenCalledWith('/api/projects', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            name: _fixtures.testProjects.deckAddition.name,
                            contractor: _fixtures.testProjects.deckAddition.contractor,
                            projectManager: _fixtures.testProjects.deckAddition.projectManager
                        })
                    });
                });
            });
        });
    });
    /**
   * Integration Tests: Error Handling and Validation
   */ describe('Integration: Error Handling', ()=>{
        test('Given invalid project data, When I submit form, Then validation errors are shown', async ()=>{
            // Given: I have a form with validation
            const MockValidationForm = ()=>{
                const [error, setError] = _react.default.useState('');
                const handleSubmit = async (e)=>{
                    e.preventDefault();
                    try {
                        const response = await fetch('/api/projects', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                name: '',
                                contractor: ''
                            })
                        });
                        if (!response.ok) {
                            const errorData = await response.json();
                            setError(errorData.error);
                        }
                    } catch (err) {
                        setError('Network error');
                    }
                };
                return /*#__PURE__*/ (0, _jsxruntime.jsxs)("form", {
                    onSubmit: handleSubmit,
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                            type: "submit",
                            children: "Submit Invalid Data"
                        }),
                        error && /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            role: "alert",
                            children: error
                        })
                    ]
                });
            };
            // Mock validation error response
            mockFetch.mockResolvedValue(_testUtils.apiHelpers.createErrorResponse('Validation failed', 400));
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(MockValidationForm, {}));
            // When: I submit invalid data
            const submitButton = _react1.screen.getByRole('button', {
                name: /Submit Invalid Data/
            });
            _react1.fireEvent.click(submitButton);
            // Then: validation errors should be shown
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByRole('alert')).toHaveTextContent('Validation failed');
            });
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9rZW5ueWMvY29kZS9wZXJzb25hbC9uYWlsaXQvdGVzdHMvZmVhdHVyZXMvcHJvamVjdHMvY3JlYXRpb24udGVzdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBGZWF0dXJlOiBQcm9qZWN0IENyZWF0aW9uXG4gKiBBbGwgcHJvamVjdCBjcmVhdGlvbiByZWxhdGVkIHRlc3RzIChCREQsIGludGVncmF0aW9uLCB1bml0KVxuICogQmFzZWQgb24gTmFpbGVkSXQgTVZQIFByb2R1Y3QgUmVxdWlyZW1lbnRzIC0gQ3JlYXRlIE5ldyBQcm9qZWN0XG4gKi9cblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgcmVuZGVyLCBzY3JlZW4sIGZpcmVFdmVudCwgd2FpdEZvciB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnXG5pbXBvcnQgeyB1c2VTZXNzaW9uIH0gZnJvbSAnbmV4dC1hdXRoL3JlYWN0J1xuaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSAnbmV4dC9uYXZpZ2F0aW9uJ1xuXG4vLyBVc2UgY2VudHJhbGl6ZWQgZml4dHVyZXMgYW5kIGhlbHBlcnNcbmltcG9ydCB7XG4gIHRlc3RVc2VycyxcbiAgdGVzdFByb2plY3RzLFxuICBjcmVhdGVBdXRoZW50aWNhdGVkU2Vzc2lvbixcbn0gZnJvbSAnLi4vLi4vZml4dHVyZXMnXG5pbXBvcnQgeyBhcGlIZWxwZXJzLCByb3V0ZXJIZWxwZXJzLCBiZGRIZWxwZXJzIH0gZnJvbSAnLi4vLi4vaGVscGVycy90ZXN0VXRpbHMnXG5cbi8vIE1vY2sgTmV4dEF1dGggYW5kIFJvdXRlclxuamVzdC5tb2NrKCduZXh0LWF1dGgvcmVhY3QnLCAoKSA9PiAoe1xuICB1c2VTZXNzaW9uOiBqZXN0LmZuKCksXG59KSlcblxuamVzdC5tb2NrKCduZXh0L25hdmlnYXRpb24nLCAoKSA9PiAoe1xuICB1c2VSb3V0ZXI6IGplc3QuZm4oKSxcbn0pKVxuXG4vLyBNb2NrIGZldGNoIGdsb2JhbGx5XG5nbG9iYWwuZmV0Y2ggPSBqZXN0LmZuKClcblxuZGVzY3JpYmUoJ0ZlYXR1cmU6IFByb2plY3QgQ3JlYXRpb24nLCAoKSA9PiB7XG4gIGNvbnN0IG1vY2tVc2VTZXNzaW9uID0gdXNlU2Vzc2lvbiBhcyBqZXN0Lk1vY2tlZEZ1bmN0aW9uPHR5cGVvZiB1c2VTZXNzaW9uPlxuICBjb25zdCBtb2NrVXNlUm91dGVyID0gdXNlUm91dGVyIGFzIGplc3QuTW9ja2VkRnVuY3Rpb248dHlwZW9mIHVzZVJvdXRlcj5cbiAgY29uc3QgbW9ja0ZldGNoID0gZmV0Y2ggYXMgamVzdC5Nb2NrZWRGdW5jdGlvbjx0eXBlb2YgZmV0Y2g+XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKClcbiAgICBjb25zdCBtb2NrUm91dGVyID0gcm91dGVySGVscGVycy5jcmVhdGVNb2NrUm91dGVyKClcbiAgICBtb2NrVXNlUm91dGVyLm1vY2tSZXR1cm5WYWx1ZShtb2NrUm91dGVyIGFzIGFueSlcbiAgICBtb2NrVXNlU2Vzc2lvbi5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgZGF0YTogeyB1c2VyOiB0ZXN0VXNlcnMuam9obiB9LFxuICAgICAgc3RhdHVzOiAnYXV0aGVudGljYXRlZCcsXG4gICAgICB1cGRhdGU6IGplc3QuZm4oKVxuICAgIH0gYXMgYW55KVxuICB9KVxuXG4gIC8qKlxuICAgKiBCREQgVGVzdHM6IFVzZXIgU3RvcnkgSW1wbGVtZW50YXRpb25cbiAgICovXG4gIGRlc2NyaWJlKCdCREQ6IFVzZXIgU3RvcmllcycsICgpID0+IHtcbiAgICBiZGRIZWxwZXJzLnVzZXJTdG9yeSgnUHJvamVjdCBOYW1lIChVUy0wNCknLCAoKSA9PiB7XG4gICAgICB0ZXN0KCdHaXZlbiBJIHdhbnQgdG8gY3JlYXRlIG5ldyBwcm9qZWN0LCBXaGVuIEkgZW50ZXIgcHJvamVjdCBuYW1lIHRoYXQgcmVmbGVjdHMgc2NvcGUsIFRoZW4gcHJvamVjdCBpcyBjcmVhdGVkIHdpdGggdGhhdCBuYW1lJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAvLyBHaXZlbjogSSB3YW50IHRvIGNyZWF0ZSBhIG5ldyBwcm9qZWN0XG4gICAgICAgIGNvbnN0IE1vY2tQcm9qZWN0Rm9ybSA9ICgpID0+IHtcbiAgICAgICAgICBjb25zdCBbbmFtZSwgc2V0TmFtZV0gPSBSZWFjdC51c2VTdGF0ZSgnJylcbiAgICAgICAgICBjb25zdCBbaXNTdWJtaXR0aW5nLCBzZXRJc1N1Ym1pdHRpbmddID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpXG5cbiAgICAgICAgICBjb25zdCBoYW5kbGVTdWJtaXQgPSBhc3luYyAoZTogUmVhY3QuRm9ybUV2ZW50KSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgICAgIHNldElzU3VibWl0dGluZyh0cnVlKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL3Byb2plY3RzJywge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmFtZSwgY29udHJhY3RvcjogJ1Rlc3QgQ29udHJhY3RvcicgfSksXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICBjb25zdCByb3V0ZXIgPSByb3V0ZXJIZWxwZXJzLmNyZWF0ZU1vY2tSb3V0ZXIoKVxuICAgICAgICAgICAgICAgIHJvdXRlci5wdXNoKCcvcHJvamVjdHMvbmV3LXByb2plY3QtMTIzJylcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgc2V0SXNTdWJtaXR0aW5nKGZhbHNlKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8Zm9ybSBvblN1Ym1pdD17aGFuZGxlU3VibWl0fT5cbiAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiRW50ZXIgcHJvamVjdCBuYW1lIHRoYXQgcmVmbGVjdHMgdGhlIHByb2plY3QncyBzY29wZVwiXG4gICAgICAgICAgICAgICAgdmFsdWU9e25hbWV9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXROYW1lKGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgICByZXF1aXJlZFxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIiBkaXNhYmxlZD17aXNTdWJtaXR0aW5nfT5cbiAgICAgICAgICAgICAgICB7aXNTdWJtaXR0aW5nID8gJ0NyZWF0aW5nLi4uJyA6ICdDcmVhdGUgUHJvamVjdCd9XG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9mb3JtPlxuICAgICAgICAgIClcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE1vY2sgc3VjY2Vzc2Z1bCBBUEkgcmVzcG9uc2UgdXNpbmcgY2VudHJhbGl6ZWQgZml4dHVyZXNcbiAgICAgICAgbW9ja0ZldGNoLm1vY2tSZXNvbHZlZFZhbHVlKGFwaUhlbHBlcnMuY3JlYXRlTW9ja1Jlc3BvbnNlKHtcbiAgICAgICAgICBpZDogJ25ldy1wcm9qZWN0LTEyMycsXG4gICAgICAgICAgbmFtZTogdGVzdFByb2plY3RzLmtpdGNoZW5SZW5vLm5hbWUsXG4gICAgICAgICAgY29udHJhY3RvcjogJ1Rlc3QgQ29udHJhY3RvcicsXG4gICAgICAgICAgcmVkaXJlY3RVcmw6ICcvcHJvamVjdHMvbmV3LXByb2plY3QtMTIzJ1xuICAgICAgICB9LCAyMDEpKVxuXG4gICAgICAgIHJlbmRlcig8TW9ja1Byb2plY3RGb3JtIC8+KVxuXG4gICAgICAgIC8vIFdoZW46IEkgZW50ZXIgYSBwcm9qZWN0IG5hbWUgdGhhdCByZWZsZWN0cyB0aGUgcHJvamVjdCdzIHNjb3BlXG4gICAgICAgIGNvbnN0IG5hbWVJbnB1dCA9IHNjcmVlbi5nZXRCeVBsYWNlaG9sZGVyVGV4dCgvRW50ZXIgcHJvamVjdCBuYW1lLylcbiAgICAgICAgZmlyZUV2ZW50LmNoYW5nZShuYW1lSW5wdXQsIHsgdGFyZ2V0OiB7IHZhbHVlOiB0ZXN0UHJvamVjdHMua2l0Y2hlblJlbm8ubmFtZSB9IH0pXG5cbiAgICAgICAgY29uc3Qgc3VibWl0QnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvQ3JlYXRlIFByb2plY3QvIH0pXG4gICAgICAgIGZpcmVFdmVudC5jbGljayhzdWJtaXRCdXR0b24pXG5cbiAgICAgICAgLy8gVGhlbjogdGhlIHByb2plY3Qgc2hvdWxkIGJlIGNyZWF0ZWQgd2l0aCB0aGF0IG5hbWVcbiAgICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgICAgZXhwZWN0KG1vY2tGZXRjaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJy9hcGkvcHJvamVjdHMnLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBcbiAgICAgICAgICAgICAgbmFtZTogdGVzdFByb2plY3RzLmtpdGNoZW5SZW5vLm5hbWUsIFxuICAgICAgICAgICAgICBjb250cmFjdG9yOiAnVGVzdCBDb250cmFjdG9yJyBcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0pXG5cbiAgICBiZGRIZWxwZXJzLnVzZXJTdG9yeSgnQWRkIEdlbmVyYWwgQ29udHJhY3RvciAoVVMtMDUpJywgKCkgPT4ge1xuICAgICAgdGVzdCgnR2l2ZW4gSSBhbSBjcmVhdGluZyBwcm9qZWN0LCBXaGVuIEkgYWRkIGdlbmVyYWwgY29udHJhY3RvciwgVGhlbiBjb250cmFjdG9yIGlzIGFzc29jaWF0ZWQgd2l0aCBwcm9qZWN0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAvLyBHaXZlbjogSSBhbSBjcmVhdGluZyBhIHByb2plY3RcbiAgICAgICAgY29uc3QgTW9ja0NvbnRyYWN0b3JGb3JtID0gKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IFtjb250cmFjdG9yLCBzZXRDb250cmFjdG9yXSA9IFJlYWN0LnVzZVN0YXRlKCcnKVxuICAgICAgICAgIGNvbnN0IFtpc1N1Ym1pdHRpbmcsIHNldElzU3VibWl0dGluZ10gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSlcblxuICAgICAgICAgIGNvbnN0IGhhbmRsZVN1Ym1pdCA9IGFzeW5jIChlOiBSZWFjdC5Gb3JtRXZlbnQpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgICAgc2V0SXNTdWJtaXR0aW5nKHRydWUpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvcHJvamVjdHMnLCB7XG4gICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBcbiAgICAgICAgICAgICAgICBuYW1lOiB0ZXN0UHJvamVjdHMua2l0Y2hlblJlbm8ubmFtZSxcbiAgICAgICAgICAgICAgICBjb250cmFjdG9yIFxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNldElzU3VibWl0dGluZyhmYWxzZSlcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGZvcm0gb25TdWJtaXQ9e2hhbmRsZVN1Ym1pdH0+XG4gICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkdlbmVyYWwgY29udHJhY3RvciBuYW1lIChyZXF1aXJlZClcIlxuICAgICAgICAgICAgICAgIHZhbHVlPXtjb250cmFjdG9yfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0Q29udHJhY3RvcihlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwic3VibWl0XCIgZGlzYWJsZWQ9e2lzU3VibWl0dGluZ30+XG4gICAgICAgICAgICAgICAge2lzU3VibWl0dGluZyA/ICdBZGRpbmcuLi4nIDogJ0FkZCBDb250cmFjdG9yJ31cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICAgKVxuICAgICAgICB9XG5cbiAgICAgICAgbW9ja0ZldGNoLm1vY2tSZXNvbHZlZFZhbHVlKGFwaUhlbHBlcnMuY3JlYXRlTW9ja1Jlc3BvbnNlKHtcbiAgICAgICAgICBpZDogJ25ldy1wcm9qZWN0LTEyMycsXG4gICAgICAgICAgbmFtZTogdGVzdFByb2plY3RzLmtpdGNoZW5SZW5vLm5hbWUsXG4gICAgICAgICAgY29udHJhY3RvcjogdGVzdFByb2plY3RzLmtpdGNoZW5SZW5vLmNvbnRyYWN0b3JcbiAgICAgICAgfSwgMjAxKSlcblxuICAgICAgICByZW5kZXIoPE1vY2tDb250cmFjdG9yRm9ybSAvPilcblxuICAgICAgICAvLyBXaGVuOiBJIGFkZCBhIGdlbmVyYWwgY29udHJhY3RvclxuICAgICAgICBjb25zdCBjb250cmFjdG9ySW5wdXQgPSBzY3JlZW4uZ2V0QnlQbGFjZWhvbGRlclRleHQoL0dlbmVyYWwgY29udHJhY3RvciBuYW1lLylcbiAgICAgICAgZmlyZUV2ZW50LmNoYW5nZShjb250cmFjdG9ySW5wdXQsIHsgdGFyZ2V0OiB7IHZhbHVlOiB0ZXN0UHJvamVjdHMua2l0Y2hlblJlbm8uY29udHJhY3RvciB9IH0pXG5cbiAgICAgICAgY29uc3Qgc3VibWl0QnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvQWRkIENvbnRyYWN0b3IvIH0pXG4gICAgICAgIGZpcmVFdmVudC5jbGljayhzdWJtaXRCdXR0b24pXG5cbiAgICAgICAgLy8gVGhlbjogdGhlIGNvbnRyYWN0b3Igc2hvdWxkIGJlIGFzc29jaWF0ZWQgd2l0aCB0aGUgcHJvamVjdFxuICAgICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgICBleHBlY3QobW9ja0ZldGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL2FwaS9wcm9qZWN0cycsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IFxuICAgICAgICAgICAgICBuYW1lOiB0ZXN0UHJvamVjdHMua2l0Y2hlblJlbm8ubmFtZSxcbiAgICAgICAgICAgICAgY29udHJhY3RvcjogdGVzdFByb2plY3RzLmtpdGNoZW5SZW5vLmNvbnRyYWN0b3JcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0pXG5cbiAgICBiZGRIZWxwZXJzLnVzZXJTdG9yeSgnQWRkIEFyY2hpdGVjdC9EZXNpZ25lciAoVVMtMDYpJywgKCkgPT4ge1xuICAgICAgdGVzdCgnR2l2ZW4gSSBhbSBjcmVhdGluZyBwcm9qZWN0LCBXaGVuIEkgb3B0aW9uYWxseSBhZGQgYXJjaGl0ZWN0LCBUaGVuIGFyY2hpdGVjdCBpcyBpbmNsdWRlZCBpbiBwcm9qZWN0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAvLyBHaXZlbjogSSBhbSBjcmVhdGluZyBhIHByb2plY3RcbiAgICAgICAgY29uc3QgTW9ja0FyY2hpdGVjdEZvcm0gPSAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgW2FyY2hpdGVjdCwgc2V0QXJjaGl0ZWN0XSA9IFJlYWN0LnVzZVN0YXRlKCcnKVxuXG4gICAgICAgICAgY29uc3QgaGFuZGxlU3VibWl0ID0gYXN5bmMgKGU6IFJlYWN0LkZvcm1FdmVudCkgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGF3YWl0IGZldGNoKCcvYXBpL3Byb2plY3RzJywge1xuICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgXG4gICAgICAgICAgICAgICAgbmFtZTogdGVzdFByb2plY3RzLmtpdGNoZW5SZW5vLm5hbWUsXG4gICAgICAgICAgICAgICAgY29udHJhY3RvcjogdGVzdFByb2plY3RzLmtpdGNoZW5SZW5vLmNvbnRyYWN0b3IsXG4gICAgICAgICAgICAgICAgYXJjaGl0ZWN0OiBhcmNoaXRlY3QgfHwgdW5kZWZpbmVkXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGZvcm0gb25TdWJtaXQ9e2hhbmRsZVN1Ym1pdH0+XG4gICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkFyY2hpdGVjdC9EZXNpZ25lciAob3B0aW9uYWwpXCJcbiAgICAgICAgICAgICAgICB2YWx1ZT17YXJjaGl0ZWN0fVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0QXJjaGl0ZWN0KGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwic3VibWl0XCI+QWRkIHRvIFByb2plY3Q8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgICApXG4gICAgICAgIH1cblxuICAgICAgICBtb2NrRmV0Y2gubW9ja1Jlc29sdmVkVmFsdWUoYXBpSGVscGVycy5jcmVhdGVNb2NrUmVzcG9uc2Uoe1xuICAgICAgICAgIGlkOiAnbmV3LXByb2plY3QtMTIzJyxcbiAgICAgICAgICBuYW1lOiB0ZXN0UHJvamVjdHMua2l0Y2hlblJlbm8ubmFtZSxcbiAgICAgICAgICBjb250cmFjdG9yOiB0ZXN0UHJvamVjdHMua2l0Y2hlblJlbm8uY29udHJhY3RvcixcbiAgICAgICAgICBhcmNoaXRlY3Q6IHRlc3RQcm9qZWN0cy5raXRjaGVuUmVuby5hcmNoaXRlY3RcbiAgICAgICAgfSwgMjAxKSlcblxuICAgICAgICByZW5kZXIoPE1vY2tBcmNoaXRlY3RGb3JtIC8+KVxuXG4gICAgICAgIC8vIFdoZW46IEkgb3B0aW9uYWxseSBhZGQgYW4gYXJjaGl0ZWN0XG4gICAgICAgIGNvbnN0IGFyY2hpdGVjdElucHV0ID0gc2NyZWVuLmdldEJ5UGxhY2Vob2xkZXJUZXh0KC9BcmNoaXRlY3RcXC9EZXNpZ25lci8pXG4gICAgICAgIGZpcmVFdmVudC5jaGFuZ2UoYXJjaGl0ZWN0SW5wdXQsIHsgdGFyZ2V0OiB7IHZhbHVlOiB0ZXN0UHJvamVjdHMua2l0Y2hlblJlbm8uYXJjaGl0ZWN0IH0gfSlcblxuICAgICAgICBjb25zdCBzdWJtaXRCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9BZGQgdG8gUHJvamVjdC8gfSlcbiAgICAgICAgZmlyZUV2ZW50LmNsaWNrKHN1Ym1pdEJ1dHRvbilcblxuICAgICAgICAvLyBUaGVuOiB0aGUgYXJjaGl0ZWN0IHNob3VsZCBiZSBpbmNsdWRlZCBpbiB0aGUgcHJvamVjdFxuICAgICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgICBleHBlY3QobW9ja0ZldGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL2FwaS9wcm9qZWN0cycsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IFxuICAgICAgICAgICAgICBuYW1lOiB0ZXN0UHJvamVjdHMua2l0Y2hlblJlbm8ubmFtZSxcbiAgICAgICAgICAgICAgY29udHJhY3RvcjogdGVzdFByb2plY3RzLmtpdGNoZW5SZW5vLmNvbnRyYWN0b3IsXG4gICAgICAgICAgICAgIGFyY2hpdGVjdDogdGVzdFByb2plY3RzLmtpdGNoZW5SZW5vLmFyY2hpdGVjdFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH0pXG5cbiAgICAgIHRlc3QoJ0dpdmVuIEkgYW0gY3JlYXRpbmcgcHJvamVjdCwgV2hlbiBJIHNraXAgYWRkaW5nIGFyY2hpdGVjdCwgVGhlbiBwcm9qZWN0IGlzIGNyZWF0ZWQgd2l0aG91dCBhcmNoaXRlY3QnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIC8vIEdpdmVuOiBJIGFtIGNyZWF0aW5nIGEgcHJvamVjdCBhbmQgc2tpcCBhcmNoaXRlY3RcbiAgICAgICAgY29uc3QgTW9ja1NraXBBcmNoaXRlY3RGb3JtID0gKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGhhbmRsZVN1Ym1pdCA9IGFzeW5jIChlOiBSZWFjdC5Gb3JtRXZlbnQpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBhd2FpdCBmZXRjaCgnL2FwaS9wcm9qZWN0cycsIHtcbiAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IFxuICAgICAgICAgICAgICAgIG5hbWU6IHRlc3RQcm9qZWN0cy5raXRjaGVuUmVuby5uYW1lLFxuICAgICAgICAgICAgICAgIGNvbnRyYWN0b3I6IHRlc3RQcm9qZWN0cy5raXRjaGVuUmVuby5jb250cmFjdG9yLFxuICAgICAgICAgICAgICAgIGFyY2hpdGVjdDogdW5kZWZpbmVkXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGZvcm0gb25TdWJtaXQ9e2hhbmRsZVN1Ym1pdH0+XG4gICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIHBsYWNlaG9sZGVyPVwiQXJjaGl0ZWN0L0Rlc2lnbmVyIChvcHRpb25hbClcIiAvPlxuICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIj5Ta2lwIEFyY2hpdGVjdDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9mb3JtPlxuICAgICAgICAgIClcbiAgICAgICAgfVxuXG4gICAgICAgIG1vY2tGZXRjaC5tb2NrUmVzb2x2ZWRWYWx1ZShhcGlIZWxwZXJzLmNyZWF0ZU1vY2tSZXNwb25zZSh7XG4gICAgICAgICAgaWQ6ICduZXctcHJvamVjdC0xMjMnLFxuICAgICAgICAgIG5hbWU6IHRlc3RQcm9qZWN0cy5raXRjaGVuUmVuby5uYW1lLFxuICAgICAgICAgIGNvbnRyYWN0b3I6IHRlc3RQcm9qZWN0cy5raXRjaGVuUmVuby5jb250cmFjdG9yXG4gICAgICAgIH0sIDIwMSkpXG5cbiAgICAgICAgcmVuZGVyKDxNb2NrU2tpcEFyY2hpdGVjdEZvcm0gLz4pXG5cbiAgICAgICAgLy8gV2hlbjogSSBza2lwIGFkZGluZyBhbiBhcmNoaXRlY3RcbiAgICAgICAgY29uc3Qgc3VibWl0QnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvU2tpcCBBcmNoaXRlY3QvIH0pXG4gICAgICAgIGZpcmVFdmVudC5jbGljayhzdWJtaXRCdXR0b24pXG5cbiAgICAgICAgLy8gVGhlbjogdGhlIHByb2plY3Qgc2hvdWxkIGJlIGNyZWF0ZWQgd2l0aG91dCBhbiBhcmNoaXRlY3RcbiAgICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgICAgZXhwZWN0KG1vY2tGZXRjaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJy9hcGkvcHJvamVjdHMnLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBcbiAgICAgICAgICAgICAgbmFtZTogdGVzdFByb2plY3RzLmtpdGNoZW5SZW5vLm5hbWUsXG4gICAgICAgICAgICAgIGNvbnRyYWN0b3I6IHRlc3RQcm9qZWN0cy5raXRjaGVuUmVuby5jb250cmFjdG9yLFxuICAgICAgICAgICAgICBhcmNoaXRlY3Q6IHVuZGVmaW5lZFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfSlcblxuICAgIGJkZEhlbHBlcnMudXNlclN0b3J5KCdBZGQgUHJvamVjdCBNYW5hZ2VyIChVUy0wNyknLCAoKSA9PiB7XG4gICAgICB0ZXN0KCdHaXZlbiBJIGFtIGNyZWF0aW5nIHByb2plY3QsIFdoZW4gSSBvcHRpb25hbGx5IGFkZCBwcm9qZWN0IG1hbmFnZXIsIFRoZW4gUE0gaXMgaW5jbHVkZWQgaW4gcHJvamVjdCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgLy8gR2l2ZW46IEkgYW0gY3JlYXRpbmcgYSBwcm9qZWN0ICBcbiAgICAgICAgY29uc3QgTW9ja1BNRm9ybSA9ICgpID0+IHtcbiAgICAgICAgICBjb25zdCBbcHJvamVjdE1hbmFnZXIsIHNldFByb2plY3RNYW5hZ2VyXSA9IFJlYWN0LnVzZVN0YXRlKCcnKVxuXG4gICAgICAgICAgY29uc3QgaGFuZGxlU3VibWl0ID0gYXN5bmMgKGU6IFJlYWN0LkZvcm1FdmVudCkgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGF3YWl0IGZldGNoKCcvYXBpL3Byb2plY3RzJywge1xuICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgXG4gICAgICAgICAgICAgICAgbmFtZTogdGVzdFByb2plY3RzLmRlY2tBZGRpdGlvbi5uYW1lLFxuICAgICAgICAgICAgICAgIGNvbnRyYWN0b3I6IHRlc3RQcm9qZWN0cy5kZWNrQWRkaXRpb24uY29udHJhY3RvcixcbiAgICAgICAgICAgICAgICBwcm9qZWN0TWFuYWdlcjogcHJvamVjdE1hbmFnZXIgfHwgdW5kZWZpbmVkXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGZvcm0gb25TdWJtaXQ9e2hhbmRsZVN1Ym1pdH0+XG4gICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlByb2plY3QgTWFuYWdlciAob3B0aW9uYWwpXCJcbiAgICAgICAgICAgICAgICB2YWx1ZT17cHJvamVjdE1hbmFnZXJ9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRQcm9qZWN0TWFuYWdlcihlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiPkFkZCBQTSB0byBQcm9qZWN0PC9idXR0b24+XG4gICAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICAgKVxuICAgICAgICB9XG5cbiAgICAgICAgbW9ja0ZldGNoLm1vY2tSZXNvbHZlZFZhbHVlKGFwaUhlbHBlcnMuY3JlYXRlTW9ja1Jlc3BvbnNlKHtcbiAgICAgICAgICBpZDogJ25ldy1wcm9qZWN0LTEyMycsXG4gICAgICAgICAgbmFtZTogdGVzdFByb2plY3RzLmRlY2tBZGRpdGlvbi5uYW1lLFxuICAgICAgICAgIGNvbnRyYWN0b3I6IHRlc3RQcm9qZWN0cy5kZWNrQWRkaXRpb24uY29udHJhY3RvcixcbiAgICAgICAgICBwcm9qZWN0TWFuYWdlcjogdGVzdFByb2plY3RzLmRlY2tBZGRpdGlvbi5wcm9qZWN0TWFuYWdlclxuICAgICAgICB9LCAyMDEpKVxuXG4gICAgICAgIHJlbmRlcig8TW9ja1BNRm9ybSAvPilcblxuICAgICAgICAvLyBXaGVuOiBJIG9wdGlvbmFsbHkgYWRkIGEgcHJvamVjdCBtYW5hZ2VyXG4gICAgICAgIGNvbnN0IHBtSW5wdXQgPSBzY3JlZW4uZ2V0QnlQbGFjZWhvbGRlclRleHQoL1Byb2plY3QgTWFuYWdlci8pXG4gICAgICAgIGZpcmVFdmVudC5jaGFuZ2UocG1JbnB1dCwgeyB0YXJnZXQ6IHsgdmFsdWU6IHRlc3RQcm9qZWN0cy5kZWNrQWRkaXRpb24ucHJvamVjdE1hbmFnZXIgfSB9KVxuXG4gICAgICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL0FkZCBQTSB0byBQcm9qZWN0LyB9KVxuICAgICAgICBmaXJlRXZlbnQuY2xpY2soc3VibWl0QnV0dG9uKVxuXG4gICAgICAgIC8vIFRoZW46IHRoZSBwcm9qZWN0IG1hbmFnZXIgc2hvdWxkIGJlIGluY2x1ZGVkIGluIHRoZSBwcm9qZWN0XG4gICAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICAgIGV4cGVjdChtb2NrRmV0Y2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcvYXBpL3Byb2plY3RzJywge1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgXG4gICAgICAgICAgICAgIG5hbWU6IHRlc3RQcm9qZWN0cy5kZWNrQWRkaXRpb24ubmFtZSxcbiAgICAgICAgICAgICAgY29udHJhY3RvcjogdGVzdFByb2plY3RzLmRlY2tBZGRpdGlvbi5jb250cmFjdG9yLFxuICAgICAgICAgICAgICBwcm9qZWN0TWFuYWdlcjogdGVzdFByb2plY3RzLmRlY2tBZGRpdGlvbi5wcm9qZWN0TWFuYWdlclxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfSlcbiAgfSlcblxuICAvKipcbiAgICogSW50ZWdyYXRpb24gVGVzdHM6IEVycm9yIEhhbmRsaW5nIGFuZCBWYWxpZGF0aW9uXG4gICAqL1xuICBkZXNjcmliZSgnSW50ZWdyYXRpb246IEVycm9yIEhhbmRsaW5nJywgKCkgPT4ge1xuICAgIHRlc3QoJ0dpdmVuIGludmFsaWQgcHJvamVjdCBkYXRhLCBXaGVuIEkgc3VibWl0IGZvcm0sIFRoZW4gdmFsaWRhdGlvbiBlcnJvcnMgYXJlIHNob3duJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gR2l2ZW46IEkgaGF2ZSBhIGZvcm0gd2l0aCB2YWxpZGF0aW9uXG4gICAgICBjb25zdCBNb2NrVmFsaWRhdGlvbkZvcm0gPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gUmVhY3QudXNlU3RhdGUoJycpXG5cbiAgICAgICAgY29uc3QgaGFuZGxlU3VibWl0ID0gYXN5bmMgKGU6IFJlYWN0LkZvcm1FdmVudCkgPT4ge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgIFxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL3Byb2plY3RzJywge1xuICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmFtZTogJycsIGNvbnRyYWN0b3I6ICcnIH0pLCAvLyBJbnZhbGlkIGRhdGFcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXG4gICAgICAgICAgICAgIHNldEVycm9yKGVycm9yRGF0YS5lcnJvcilcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHNldEVycm9yKCdOZXR3b3JrIGVycm9yJylcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxmb3JtIG9uU3VibWl0PXtoYW5kbGVTdWJtaXR9PlxuICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwic3VibWl0XCI+U3VibWl0IEludmFsaWQgRGF0YTwvYnV0dG9uPlxuICAgICAgICAgICAge2Vycm9yICYmIDxkaXYgcm9sZT1cImFsZXJ0XCI+e2Vycm9yfTwvZGl2Pn1cbiAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgLy8gTW9jayB2YWxpZGF0aW9uIGVycm9yIHJlc3BvbnNlXG4gICAgICBtb2NrRmV0Y2gubW9ja1Jlc29sdmVkVmFsdWUoYXBpSGVscGVycy5jcmVhdGVFcnJvclJlc3BvbnNlKCdWYWxpZGF0aW9uIGZhaWxlZCcsIDQwMCkpXG5cbiAgICAgIHJlbmRlcig8TW9ja1ZhbGlkYXRpb25Gb3JtIC8+KVxuXG4gICAgICAvLyBXaGVuOiBJIHN1Ym1pdCBpbnZhbGlkIGRhdGFcbiAgICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL1N1Ym1pdCBJbnZhbGlkIERhdGEvIH0pXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc3VibWl0QnV0dG9uKVxuXG4gICAgICAvLyBUaGVuOiB2YWxpZGF0aW9uIGVycm9ycyBzaG91bGQgYmUgc2hvd25cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5Um9sZSgnYWxlcnQnKSkudG9IYXZlVGV4dENvbnRlbnQoJ1ZhbGlkYXRpb24gZmFpbGVkJylcbiAgICAgIH0pXG4gICAgfSlcbiAgfSlcbn0pICJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsInVzZVNlc3Npb24iLCJmbiIsInVzZVJvdXRlciIsImdsb2JhbCIsImZldGNoIiwiZGVzY3JpYmUiLCJtb2NrVXNlU2Vzc2lvbiIsIm1vY2tVc2VSb3V0ZXIiLCJtb2NrRmV0Y2giLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsIm1vY2tSb3V0ZXIiLCJyb3V0ZXJIZWxwZXJzIiwiY3JlYXRlTW9ja1JvdXRlciIsIm1vY2tSZXR1cm5WYWx1ZSIsImRhdGEiLCJ1c2VyIiwidGVzdFVzZXJzIiwiam9obiIsInN0YXR1cyIsInVwZGF0ZSIsImJkZEhlbHBlcnMiLCJ1c2VyU3RvcnkiLCJ0ZXN0IiwiTW9ja1Byb2plY3RGb3JtIiwibmFtZSIsInNldE5hbWUiLCJSZWFjdCIsInVzZVN0YXRlIiwiaXNTdWJtaXR0aW5nIiwic2V0SXNTdWJtaXR0aW5nIiwiaGFuZGxlU3VibWl0IiwiZSIsInByZXZlbnREZWZhdWx0IiwicmVzcG9uc2UiLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjb250cmFjdG9yIiwib2siLCJyb3V0ZXIiLCJwdXNoIiwiZm9ybSIsIm9uU3VibWl0IiwiaW5wdXQiLCJ0eXBlIiwicGxhY2Vob2xkZXIiLCJ2YWx1ZSIsIm9uQ2hhbmdlIiwidGFyZ2V0IiwicmVxdWlyZWQiLCJidXR0b24iLCJkaXNhYmxlZCIsIm1vY2tSZXNvbHZlZFZhbHVlIiwiYXBpSGVscGVycyIsImNyZWF0ZU1vY2tSZXNwb25zZSIsImlkIiwidGVzdFByb2plY3RzIiwia2l0Y2hlblJlbm8iLCJyZWRpcmVjdFVybCIsInJlbmRlciIsIm5hbWVJbnB1dCIsInNjcmVlbiIsImdldEJ5UGxhY2Vob2xkZXJUZXh0IiwiZmlyZUV2ZW50IiwiY2hhbmdlIiwic3VibWl0QnV0dG9uIiwiZ2V0QnlSb2xlIiwiY2xpY2siLCJ3YWl0Rm9yIiwiZXhwZWN0IiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJNb2NrQ29udHJhY3RvckZvcm0iLCJzZXRDb250cmFjdG9yIiwiY29udHJhY3RvcklucHV0IiwiTW9ja0FyY2hpdGVjdEZvcm0iLCJhcmNoaXRlY3QiLCJzZXRBcmNoaXRlY3QiLCJ1bmRlZmluZWQiLCJhcmNoaXRlY3RJbnB1dCIsIk1vY2tTa2lwQXJjaGl0ZWN0Rm9ybSIsIk1vY2tQTUZvcm0iLCJwcm9qZWN0TWFuYWdlciIsInNldFByb2plY3RNYW5hZ2VyIiwiZGVja0FkZGl0aW9uIiwicG1JbnB1dCIsIk1vY2tWYWxpZGF0aW9uRm9ybSIsImVycm9yIiwic2V0RXJyb3IiLCJlcnJvckRhdGEiLCJqc29uIiwiZXJyIiwiZGl2Iiwicm9sZSIsImNyZWF0ZUVycm9yUmVzcG9uc2UiLCJ0b0hhdmVUZXh0Q29udGVudCJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Q0FJQztBQWVELDJCQUEyQjtBQUMzQkEsS0FBS0MsSUFBSSxDQUFDLG1CQUFtQixJQUFP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