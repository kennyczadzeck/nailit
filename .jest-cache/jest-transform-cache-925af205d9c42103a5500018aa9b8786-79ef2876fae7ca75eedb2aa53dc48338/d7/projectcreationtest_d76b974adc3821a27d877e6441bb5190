c3081dae4414fdeb74f2be09aae48106
/**
 * Feature: Project Creation 
 * Based on NailedIt MVP Product Requirements - Create New Project
 */ "use strict";
// Mock NextAuth and Router
jest.mock('next-auth/react', ()=>({
        useSession: jest.fn()
    }));
jest.mock('next/navigation', ()=>({
        useRouter: jest.fn()
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_default(require("react"));
const _react1 = require("@testing-library/react");
const _react2 = require("next-auth/react");
const _navigation = require("next/navigation");
const _fixtures = require("../../fixtures");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
// Mock fetch globally
global.fetch = jest.fn();
describe('Feature: Create New Project', ()=>{
    const mockPush = jest.fn();
    const mockUseSession = _react2.useSession;
    const mockUseRouter = _navigation.useRouter;
    const mockFetch = fetch;
    beforeEach(()=>{
        jest.clearAllMocks();
        mockUseRouter.mockReturnValue({
            push: mockPush
        });
        mockUseSession.mockReturnValue({
            data: {
                user: _fixtures.testUsers.john
            },
            status: 'authenticated',
            update: jest.fn()
        });
    });
    /**
   * User Story: US-04 - Project Name
   * "As a homeowner who wants to initiate a new project in Nailit, 
   * I need to provide a project name that reflects the project's scope, 
   * so I can differentiate it from other projects."
   */ describe('User Story: Project Name', ()=>{
        test('Given I want to create new project, When I enter project name that reflects scope, Then project is created with that name', async ()=>{
            // Given: I want to create a new project
            const MockProjectForm = ()=>{
                const [name, setName] = _react.default.useState('');
                const [isSubmitting, setIsSubmitting] = _react.default.useState(false);
                const handleSubmit = async (e)=>{
                    e.preventDefault();
                    setIsSubmitting(true);
                    try {
                        const response = await fetch('/api/projects', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                name,
                                contractor: 'Test Contractor'
                            })
                        });
                        if (response.ok) {
                            // Navigate to project detail page
                            mockPush('/projects/new-project-123');
                        }
                    } finally{
                        setIsSubmitting(false);
                    }
                };
                return /*#__PURE__*/ (0, _jsxruntime.jsxs)("form", {
                    onSubmit: handleSubmit,
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("input", {
                            type: "text",
                            placeholder: "Enter project name that reflects the project's scope",
                            value: name,
                            onChange: (e)=>setName(e.target.value),
                            required: true
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                            type: "submit",
                            disabled: isSubmitting,
                            children: isSubmitting ? 'Creating...' : 'Create Project'
                        })
                    ]
                });
            };
            // Mock successful API response using centralized fixtures
            mockFetch.mockResolvedValue(new Response(JSON.stringify({
                id: 'new-project-123',
                name: _fixtures.testProjects.kitchenReno.name,
                contractor: 'Test Contractor',
                redirectUrl: '/projects/new-project-123'
            }), {
                status: 201
            }));
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(MockProjectForm, {}));
            // When: I enter a project name that reflects the project's scope
            const nameInput = _react1.screen.getByPlaceholderText(/Enter project name/);
            _react1.fireEvent.change(nameInput, {
                target: {
                    value: _fixtures.testProjects.kitchenReno.name
                }
            });
            const submitButton = _react1.screen.getByRole('button', {
                name: /Create Project/
            });
            _react1.fireEvent.click(submitButton);
            // Then: the project should be created with that name
            await (0, _react1.waitFor)(()=>{
                expect(mockFetch).toHaveBeenCalledWith('/api/projects', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        name: _fixtures.testProjects.kitchenReno.name,
                        contractor: 'Test Contractor'
                    })
                });
            });
        });
    });
    /**
   * User Story: US-05 - Add General Contractor
   * "As a homeowner who wants to initiate a new project in Nailit, 
   * I need to add a general contractor, so I know who is responsible for the overall project."
   */ describe('User Story: Add General Contractor', ()=>{
        test('Given I am creating project, When I add general contractor, Then contractor is associated with project', async ()=>{
            // Given: I am creating a project
            const MockContractorForm = ()=>{
                const [contractor, setContractor] = _react.default.useState('');
                const [isSubmitting, setIsSubmitting] = _react.default.useState(false);
                const handleSubmit = async (e)=>{
                    e.preventDefault();
                    setIsSubmitting(true);
                    const response = await fetch('/api/projects', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            name: _fixtures.testProjects.kitchenReno.name,
                            contractor
                        })
                    });
                    setIsSubmitting(false);
                };
                return /*#__PURE__*/ (0, _jsxruntime.jsxs)("form", {
                    onSubmit: handleSubmit,
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("input", {
                            type: "text",
                            placeholder: "General contractor name (required)",
                            value: contractor,
                            onChange: (e)=>setContractor(e.target.value),
                            required: true
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                            type: "submit",
                            disabled: isSubmitting,
                            children: isSubmitting ? 'Adding...' : 'Add Contractor'
                        })
                    ]
                });
            };
            mockFetch.mockResolvedValue(new Response(JSON.stringify({
                id: 'new-project-123',
                name: _fixtures.testProjects.kitchenReno.name,
                contractor: _fixtures.testProjects.kitchenReno.contractor
            }), {
                status: 201
            }));
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(MockContractorForm, {}));
            // When: I add a general contractor
            const contractorInput = _react1.screen.getByPlaceholderText(/General contractor name/);
            _react1.fireEvent.change(contractorInput, {
                target: {
                    value: _fixtures.testProjects.kitchenReno.contractor
                }
            });
            const submitButton = _react1.screen.getByRole('button', {
                name: /Add Contractor/
            });
            _react1.fireEvent.click(submitButton);
            // Then: the contractor should be associated with the project
            await (0, _react1.waitFor)(()=>{
                expect(mockFetch).toHaveBeenCalledWith('/api/projects', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        name: _fixtures.testProjects.kitchenReno.name,
                        contractor: _fixtures.testProjects.kitchenReno.contractor
                    })
                });
            });
        });
    });
    /**
   * User Story: US-06 - Add Architect/Designer (Optional)
   * "As a homeowner who wants to initiate a new project in Nailit,
   * I want to optionally add an architect or designer, 
   * so they can be included in the project communications."
   */ describe('User Story: Add Architect/Designer (Optional)', ()=>{
        test('Given I am creating project, When I optionally add architect, Then architect is included in project', async ()=>{
            // Given: I am creating a project
            const MockArchitectForm = ()=>{
                const [architect, setArchitect] = _react.default.useState('');
                const handleSubmit = async (e)=>{
                    e.preventDefault();
                    await fetch('/api/projects', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            name: _fixtures.testProjects.kitchenReno.name,
                            contractor: _fixtures.testProjects.kitchenReno.contractor,
                            architect: architect || undefined
                        })
                    });
                };
                return /*#__PURE__*/ (0, _jsxruntime.jsxs)("form", {
                    onSubmit: handleSubmit,
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("input", {
                            type: "text",
                            placeholder: "Architect/Designer (optional)",
                            value: architect,
                            onChange: (e)=>setArchitect(e.target.value)
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                            type: "submit",
                            children: "Add to Project"
                        })
                    ]
                });
            };
            mockFetch.mockResolvedValue(new Response(JSON.stringify({
                id: 'new-project-123',
                name: _fixtures.testProjects.kitchenReno.name,
                contractor: _fixtures.testProjects.kitchenReno.contractor,
                architect: _fixtures.testProjects.kitchenReno.architect
            }), {
                status: 201
            }));
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(MockArchitectForm, {}));
            // When: I optionally add an architect
            const architectInput = _react1.screen.getByPlaceholderText(/Architect\/Designer/);
            _react1.fireEvent.change(architectInput, {
                target: {
                    value: _fixtures.testProjects.kitchenReno.architect
                }
            });
            const submitButton = _react1.screen.getByRole('button', {
                name: /Add to Project/
            });
            _react1.fireEvent.click(submitButton);
            // Then: the architect should be included in the project
            await (0, _react1.waitFor)(()=>{
                expect(mockFetch).toHaveBeenCalledWith('/api/projects', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        name: _fixtures.testProjects.kitchenReno.name,
                        contractor: _fixtures.testProjects.kitchenReno.contractor,
                        architect: _fixtures.testProjects.kitchenReno.architect
                    })
                });
            });
        });
        test('Given I am creating project, When I skip adding architect, Then project is created without architect', async ()=>{
            // Given: I am creating a project and skip architect
            const MockSkipArchitectForm = ()=>{
                const handleSubmit = async (e)=>{
                    e.preventDefault();
                    await fetch('/api/projects', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            name: _fixtures.testProjects.kitchenReno.name,
                            contractor: _fixtures.testProjects.kitchenReno.contractor,
                            architect: undefined
                        })
                    });
                };
                return /*#__PURE__*/ (0, _jsxruntime.jsxs)("form", {
                    onSubmit: handleSubmit,
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("input", {
                            type: "text",
                            placeholder: "Architect/Designer (optional)"
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                            type: "submit",
                            children: "Skip Architect"
                        })
                    ]
                });
            };
            mockFetch.mockResolvedValue(new Response(JSON.stringify({
                id: 'new-project-123',
                name: _fixtures.testProjects.kitchenReno.name,
                contractor: _fixtures.testProjects.kitchenReno.contractor
            }), {
                status: 201
            }));
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(MockSkipArchitectForm, {}));
            // When: I skip adding an architect
            const submitButton = _react1.screen.getByRole('button', {
                name: /Skip Architect/
            });
            _react1.fireEvent.click(submitButton);
            // Then: the project should be created without an architect
            await (0, _react1.waitFor)(()=>{
                expect(mockFetch).toHaveBeenCalledWith('/api/projects', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        name: _fixtures.testProjects.kitchenReno.name,
                        contractor: _fixtures.testProjects.kitchenReno.contractor,
                        architect: undefined
                    })
                });
            });
        });
    });
    /**
   * User Story: US-07 - Add Project Manager (Optional)
   * "As a homeowner who wants to initiate a new project in Nailit,
   * I want to optionally add a project manager,
   * so they can be included in the project communications."
   */ describe('User Story: Add Project Manager (Optional)', ()=>{
        test('Given I am creating project, When I optionally add project manager, Then PM is included in project', async ()=>{
            // Given: I am creating a project  
            const MockPMForm = ()=>{
                const [projectManager, setProjectManager] = _react.default.useState('');
                const handleSubmit = async (e)=>{
                    e.preventDefault();
                    await fetch('/api/projects', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            name: _fixtures.testProjects.deckAddition.name,
                            contractor: _fixtures.testProjects.deckAddition.contractor,
                            projectManager: projectManager || undefined
                        })
                    });
                };
                return /*#__PURE__*/ (0, _jsxruntime.jsxs)("form", {
                    onSubmit: handleSubmit,
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("input", {
                            type: "text",
                            placeholder: "Project Manager (optional)",
                            value: projectManager,
                            onChange: (e)=>setProjectManager(e.target.value)
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                            type: "submit",
                            children: "Add PM to Project"
                        })
                    ]
                });
            };
            mockFetch.mockResolvedValue(new Response(JSON.stringify({
                id: 'new-project-123',
                name: _fixtures.testProjects.deckAddition.name,
                contractor: _fixtures.testProjects.deckAddition.contractor,
                projectManager: _fixtures.testProjects.deckAddition.projectManager
            }), {
                status: 201
            }));
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(MockPMForm, {}));
            // When: I optionally add a project manager
            const pmInput = _react1.screen.getByPlaceholderText(/Project Manager/);
            _react1.fireEvent.change(pmInput, {
                target: {
                    value: _fixtures.testProjects.deckAddition.projectManager
                }
            });
            const submitButton = _react1.screen.getByRole('button', {
                name: /Add PM to Project/
            });
            _react1.fireEvent.click(submitButton);
            // Then: the project manager should be included in the project
            await (0, _react1.waitFor)(()=>{
                expect(mockFetch).toHaveBeenCalledWith('/api/projects', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        name: _fixtures.testProjects.deckAddition.name,
                        contractor: _fixtures.testProjects.deckAddition.contractor,
                        projectManager: _fixtures.testProjects.deckAddition.projectManager
                    })
                });
            });
        });
    });
    /**
   * Error Handling and Validation
   */ describe('Error Handling', ()=>{
        test('Given invalid project data, When I submit form, Then validation errors are shown', async ()=>{
            // Given: I have a form with validation
            const MockValidationForm = ()=>{
                const [error, setError] = _react.default.useState('');
                const handleSubmit = async (e)=>{
                    e.preventDefault();
                    try {
                        const response = await fetch('/api/projects', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                name: '',
                                contractor: ''
                            })
                        });
                        if (!response.ok) {
                            const errorData = await response.json();
                            setError(errorData.error);
                        }
                    } catch (err) {
                        setError('Network error');
                    }
                };
                return /*#__PURE__*/ (0, _jsxruntime.jsxs)("form", {
                    onSubmit: handleSubmit,
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                            type: "submit",
                            children: "Submit Invalid Data"
                        }),
                        error && /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            role: "alert",
                            children: error
                        })
                    ]
                });
            };
            // Mock validation error response
            mockFetch.mockResolvedValue(new Response(JSON.stringify({
                error: 'Validation failed',
                fieldErrors: {
                    name: [
                        'Project name is required'
                    ],
                    contractor: [
                        'Contractor is required'
                    ]
                }
            }), {
                status: 400
            }));
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(MockValidationForm, {}));
            // When: I submit invalid data
            const submitButton = _react1.screen.getByRole('button', {
                name: /Submit Invalid Data/
            });
            _react1.fireEvent.click(submitButton);
            // Then: validation errors should be shown
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByRole('alert')).toHaveTextContent('Validation failed');
            });
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9rZW5ueWMvY29kZS9wZXJzb25hbC9uYWlsaXQvdGVzdHMvYmRkL2ZlYXR1cmVzL3Byb2plY3QtY3JlYXRpb24udGVzdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBGZWF0dXJlOiBQcm9qZWN0IENyZWF0aW9uIFxuICogQmFzZWQgb24gTmFpbGVkSXQgTVZQIFByb2R1Y3QgUmVxdWlyZW1lbnRzIC0gQ3JlYXRlIE5ldyBQcm9qZWN0XG4gKi9cblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgcmVuZGVyLCBzY3JlZW4sIGZpcmVFdmVudCwgd2FpdEZvciB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnXG5pbXBvcnQgeyB1c2VTZXNzaW9uIH0gZnJvbSAnbmV4dC1hdXRoL3JlYWN0J1xuaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSAnbmV4dC9uYXZpZ2F0aW9uJ1xuXG4vLyBVc2UgY2VudHJhbGl6ZWQgZml4dHVyZXNcbmltcG9ydCB7XG4gIHRlc3RVc2VycyxcbiAgdGVzdFByb2plY3RzLFxuICBjcmVhdGVBdXRoZW50aWNhdGVkU2Vzc2lvbixcbiAgY3JlYXRlVGVzdFByb2plY3QsXG4gIGZvcm1SZXNwb25zZXMsXG4gIHN1Y2Nlc3NSZXNwb25zZXMsXG4gIGVycm9yUmVzcG9uc2VzLFxufSBmcm9tICcuLi8uLi9maXh0dXJlcydcblxuLy8gTW9jayBOZXh0QXV0aCBhbmQgUm91dGVyXG5qZXN0Lm1vY2soJ25leHQtYXV0aC9yZWFjdCcsICgpID0+ICh7XG4gIHVzZVNlc3Npb246IGplc3QuZm4oKSxcbn0pKVxuXG5qZXN0Lm1vY2soJ25leHQvbmF2aWdhdGlvbicsICgpID0+ICh7XG4gIHVzZVJvdXRlcjogamVzdC5mbigpLFxufSkpXG5cbi8vIE1vY2sgZmV0Y2ggZ2xvYmFsbHlcbmdsb2JhbC5mZXRjaCA9IGplc3QuZm4oKVxuXG5kZXNjcmliZSgnRmVhdHVyZTogQ3JlYXRlIE5ldyBQcm9qZWN0JywgKCkgPT4ge1xuICBjb25zdCBtb2NrUHVzaCA9IGplc3QuZm4oKVxuICBjb25zdCBtb2NrVXNlU2Vzc2lvbiA9IHVzZVNlc3Npb24gYXMgamVzdC5Nb2NrZWRGdW5jdGlvbjx0eXBlb2YgdXNlU2Vzc2lvbj5cbiAgY29uc3QgbW9ja1VzZVJvdXRlciA9IHVzZVJvdXRlciBhcyBqZXN0Lk1vY2tlZEZ1bmN0aW9uPHR5cGVvZiB1c2VSb3V0ZXI+XG4gIGNvbnN0IG1vY2tGZXRjaCA9IGZldGNoIGFzIGplc3QuTW9ja2VkRnVuY3Rpb248dHlwZW9mIGZldGNoPlxuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpXG4gICAgbW9ja1VzZVJvdXRlci5tb2NrUmV0dXJuVmFsdWUoeyBwdXNoOiBtb2NrUHVzaCB9IGFzIGFueSlcbiAgICBtb2NrVXNlU2Vzc2lvbi5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgZGF0YTogeyB1c2VyOiB0ZXN0VXNlcnMuam9obiB9LFxuICAgICAgc3RhdHVzOiAnYXV0aGVudGljYXRlZCcsXG4gICAgICB1cGRhdGU6IGplc3QuZm4oKVxuICAgIH0gYXMgYW55KVxuICB9KVxuXG4gIC8qKlxuICAgKiBVc2VyIFN0b3J5OiBVUy0wNCAtIFByb2plY3QgTmFtZVxuICAgKiBcIkFzIGEgaG9tZW93bmVyIHdobyB3YW50cyB0byBpbml0aWF0ZSBhIG5ldyBwcm9qZWN0IGluIE5haWxpdCwgXG4gICAqIEkgbmVlZCB0byBwcm92aWRlIGEgcHJvamVjdCBuYW1lIHRoYXQgcmVmbGVjdHMgdGhlIHByb2plY3QncyBzY29wZSwgXG4gICAqIHNvIEkgY2FuIGRpZmZlcmVudGlhdGUgaXQgZnJvbSBvdGhlciBwcm9qZWN0cy5cIlxuICAgKi9cbiAgZGVzY3JpYmUoJ1VzZXIgU3Rvcnk6IFByb2plY3QgTmFtZScsICgpID0+IHtcbiAgICB0ZXN0KCdHaXZlbiBJIHdhbnQgdG8gY3JlYXRlIG5ldyBwcm9qZWN0LCBXaGVuIEkgZW50ZXIgcHJvamVjdCBuYW1lIHRoYXQgcmVmbGVjdHMgc2NvcGUsIFRoZW4gcHJvamVjdCBpcyBjcmVhdGVkIHdpdGggdGhhdCBuYW1lJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gR2l2ZW46IEkgd2FudCB0byBjcmVhdGUgYSBuZXcgcHJvamVjdFxuICAgICAgY29uc3QgTW9ja1Byb2plY3RGb3JtID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBbbmFtZSwgc2V0TmFtZV0gPSBSZWFjdC51c2VTdGF0ZSgnJylcbiAgICAgICAgY29uc3QgW2lzU3VibWl0dGluZywgc2V0SXNTdWJtaXR0aW5nXSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKVxuXG4gICAgICAgIGNvbnN0IGhhbmRsZVN1Ym1pdCA9IGFzeW5jIChlOiBSZWFjdC5Gb3JtRXZlbnQpID0+IHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgICBzZXRJc1N1Ym1pdHRpbmcodHJ1ZSlcbiAgICAgICAgICBcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9wcm9qZWN0cycsIHtcbiAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWUsIGNvbnRyYWN0b3I6ICdUZXN0IENvbnRyYWN0b3InIH0pLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgIC8vIE5hdmlnYXRlIHRvIHByb2plY3QgZGV0YWlsIHBhZ2VcbiAgICAgICAgICAgICAgbW9ja1B1c2goJy9wcm9qZWN0cy9uZXctcHJvamVjdC0xMjMnKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBzZXRJc1N1Ym1pdHRpbmcoZmFsc2UpXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8Zm9ybSBvblN1Ym1pdD17aGFuZGxlU3VibWl0fT5cbiAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiRW50ZXIgcHJvamVjdCBuYW1lIHRoYXQgcmVmbGVjdHMgdGhlIHByb2plY3QncyBzY29wZVwiXG4gICAgICAgICAgICAgIHZhbHVlPXtuYW1lfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldE5hbWUoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICByZXF1aXJlZFxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiIGRpc2FibGVkPXtpc1N1Ym1pdHRpbmd9PlxuICAgICAgICAgICAgICB7aXNTdWJtaXR0aW5nID8gJ0NyZWF0aW5nLi4uJyA6ICdDcmVhdGUgUHJvamVjdCd9XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgLy8gTW9jayBzdWNjZXNzZnVsIEFQSSByZXNwb25zZSB1c2luZyBjZW50cmFsaXplZCBmaXh0dXJlc1xuICAgICAgbW9ja0ZldGNoLm1vY2tSZXNvbHZlZFZhbHVlKG5ldyBSZXNwb25zZShKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGlkOiAnbmV3LXByb2plY3QtMTIzJyxcbiAgICAgICAgbmFtZTogdGVzdFByb2plY3RzLmtpdGNoZW5SZW5vLm5hbWUsXG4gICAgICAgIGNvbnRyYWN0b3I6ICdUZXN0IENvbnRyYWN0b3InLFxuICAgICAgICByZWRpcmVjdFVybDogJy9wcm9qZWN0cy9uZXctcHJvamVjdC0xMjMnXG4gICAgICB9KSwgeyBzdGF0dXM6IDIwMSB9KSlcblxuICAgICAgcmVuZGVyKDxNb2NrUHJvamVjdEZvcm0gLz4pXG5cbiAgICAgIC8vIFdoZW46IEkgZW50ZXIgYSBwcm9qZWN0IG5hbWUgdGhhdCByZWZsZWN0cyB0aGUgcHJvamVjdCdzIHNjb3BlXG4gICAgICBjb25zdCBuYW1lSW5wdXQgPSBzY3JlZW4uZ2V0QnlQbGFjZWhvbGRlclRleHQoL0VudGVyIHByb2plY3QgbmFtZS8pXG4gICAgICBmaXJlRXZlbnQuY2hhbmdlKG5hbWVJbnB1dCwgeyB0YXJnZXQ6IHsgdmFsdWU6IHRlc3RQcm9qZWN0cy5raXRjaGVuUmVuby5uYW1lIH0gfSlcblxuICAgICAgY29uc3Qgc3VibWl0QnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvQ3JlYXRlIFByb2plY3QvIH0pXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc3VibWl0QnV0dG9uKVxuXG4gICAgICAvLyBUaGVuOiB0aGUgcHJvamVjdCBzaG91bGQgYmUgY3JlYXRlZCB3aXRoIHRoYXQgbmFtZVxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChtb2NrRmV0Y2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcvYXBpL3Byb2plY3RzJywge1xuICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgXG4gICAgICAgICAgICBuYW1lOiB0ZXN0UHJvamVjdHMua2l0Y2hlblJlbm8ubmFtZSwgXG4gICAgICAgICAgICBjb250cmFjdG9yOiAnVGVzdCBDb250cmFjdG9yJyBcbiAgICAgICAgICB9KSxcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfSlcbiAgfSlcblxuICAvKipcbiAgICogVXNlciBTdG9yeTogVVMtMDUgLSBBZGQgR2VuZXJhbCBDb250cmFjdG9yXG4gICAqIFwiQXMgYSBob21lb3duZXIgd2hvIHdhbnRzIHRvIGluaXRpYXRlIGEgbmV3IHByb2plY3QgaW4gTmFpbGl0LCBcbiAgICogSSBuZWVkIHRvIGFkZCBhIGdlbmVyYWwgY29udHJhY3Rvciwgc28gSSBrbm93IHdobyBpcyByZXNwb25zaWJsZSBmb3IgdGhlIG92ZXJhbGwgcHJvamVjdC5cIlxuICAgKi9cbiAgZGVzY3JpYmUoJ1VzZXIgU3Rvcnk6IEFkZCBHZW5lcmFsIENvbnRyYWN0b3InLCAoKSA9PiB7XG4gICAgdGVzdCgnR2l2ZW4gSSBhbSBjcmVhdGluZyBwcm9qZWN0LCBXaGVuIEkgYWRkIGdlbmVyYWwgY29udHJhY3RvciwgVGhlbiBjb250cmFjdG9yIGlzIGFzc29jaWF0ZWQgd2l0aCBwcm9qZWN0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gR2l2ZW46IEkgYW0gY3JlYXRpbmcgYSBwcm9qZWN0XG4gICAgICBjb25zdCBNb2NrQ29udHJhY3RvckZvcm0gPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IFtjb250cmFjdG9yLCBzZXRDb250cmFjdG9yXSA9IFJlYWN0LnVzZVN0YXRlKCcnKVxuICAgICAgICBjb25zdCBbaXNTdWJtaXR0aW5nLCBzZXRJc1N1Ym1pdHRpbmddID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpXG5cbiAgICAgICAgY29uc3QgaGFuZGxlU3VibWl0ID0gYXN5bmMgKGU6IFJlYWN0LkZvcm1FdmVudCkgPT4ge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgIHNldElzU3VibWl0dGluZyh0cnVlKVxuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvcHJvamVjdHMnLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBcbiAgICAgICAgICAgICAgbmFtZTogdGVzdFByb2plY3RzLmtpdGNoZW5SZW5vLm5hbWUsXG4gICAgICAgICAgICAgIGNvbnRyYWN0b3IgXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICB9KVxuICAgICAgICAgIFxuICAgICAgICAgIHNldElzU3VibWl0dGluZyhmYWxzZSlcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgPGZvcm0gb25TdWJtaXQ9e2hhbmRsZVN1Ym1pdH0+XG4gICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkdlbmVyYWwgY29udHJhY3RvciBuYW1lIChyZXF1aXJlZClcIlxuICAgICAgICAgICAgICB2YWx1ZT17Y29udHJhY3Rvcn1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRDb250cmFjdG9yKGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIiBkaXNhYmxlZD17aXNTdWJtaXR0aW5nfT5cbiAgICAgICAgICAgICAge2lzU3VibWl0dGluZyA/ICdBZGRpbmcuLi4nIDogJ0FkZCBDb250cmFjdG9yJ31cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICBtb2NrRmV0Y2gubW9ja1Jlc29sdmVkVmFsdWUobmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgaWQ6ICduZXctcHJvamVjdC0xMjMnLFxuICAgICAgICBuYW1lOiB0ZXN0UHJvamVjdHMua2l0Y2hlblJlbm8ubmFtZSxcbiAgICAgICAgY29udHJhY3RvcjogdGVzdFByb2plY3RzLmtpdGNoZW5SZW5vLmNvbnRyYWN0b3JcbiAgICAgIH0pLCB7IHN0YXR1czogMjAxIH0pKVxuXG4gICAgICByZW5kZXIoPE1vY2tDb250cmFjdG9yRm9ybSAvPilcblxuICAgICAgLy8gV2hlbjogSSBhZGQgYSBnZW5lcmFsIGNvbnRyYWN0b3JcbiAgICAgIGNvbnN0IGNvbnRyYWN0b3JJbnB1dCA9IHNjcmVlbi5nZXRCeVBsYWNlaG9sZGVyVGV4dCgvR2VuZXJhbCBjb250cmFjdG9yIG5hbWUvKVxuICAgICAgZmlyZUV2ZW50LmNoYW5nZShjb250cmFjdG9ySW5wdXQsIHsgdGFyZ2V0OiB7IHZhbHVlOiB0ZXN0UHJvamVjdHMua2l0Y2hlblJlbm8uY29udHJhY3RvciB9IH0pXG5cbiAgICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL0FkZCBDb250cmFjdG9yLyB9KVxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHN1Ym1pdEJ1dHRvbilcblxuICAgICAgLy8gVGhlbjogdGhlIGNvbnRyYWN0b3Igc2hvdWxkIGJlIGFzc29jaWF0ZWQgd2l0aCB0aGUgcHJvamVjdFxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChtb2NrRmV0Y2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcvYXBpL3Byb2plY3RzJywge1xuICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgXG4gICAgICAgICAgICBuYW1lOiB0ZXN0UHJvamVjdHMua2l0Y2hlblJlbm8ubmFtZSxcbiAgICAgICAgICAgIGNvbnRyYWN0b3I6IHRlc3RQcm9qZWN0cy5raXRjaGVuUmVuby5jb250cmFjdG9yXG4gICAgICAgICAgfSksXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0pXG4gIH0pXG5cbiAgLyoqXG4gICAqIFVzZXIgU3Rvcnk6IFVTLTA2IC0gQWRkIEFyY2hpdGVjdC9EZXNpZ25lciAoT3B0aW9uYWwpXG4gICAqIFwiQXMgYSBob21lb3duZXIgd2hvIHdhbnRzIHRvIGluaXRpYXRlIGEgbmV3IHByb2plY3QgaW4gTmFpbGl0LFxuICAgKiBJIHdhbnQgdG8gb3B0aW9uYWxseSBhZGQgYW4gYXJjaGl0ZWN0IG9yIGRlc2lnbmVyLCBcbiAgICogc28gdGhleSBjYW4gYmUgaW5jbHVkZWQgaW4gdGhlIHByb2plY3QgY29tbXVuaWNhdGlvbnMuXCJcbiAgICovXG4gIGRlc2NyaWJlKCdVc2VyIFN0b3J5OiBBZGQgQXJjaGl0ZWN0L0Rlc2lnbmVyIChPcHRpb25hbCknLCAoKSA9PiB7XG4gICAgdGVzdCgnR2l2ZW4gSSBhbSBjcmVhdGluZyBwcm9qZWN0LCBXaGVuIEkgb3B0aW9uYWxseSBhZGQgYXJjaGl0ZWN0LCBUaGVuIGFyY2hpdGVjdCBpcyBpbmNsdWRlZCBpbiBwcm9qZWN0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gR2l2ZW46IEkgYW0gY3JlYXRpbmcgYSBwcm9qZWN0XG4gICAgICBjb25zdCBNb2NrQXJjaGl0ZWN0Rm9ybSA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgW2FyY2hpdGVjdCwgc2V0QXJjaGl0ZWN0XSA9IFJlYWN0LnVzZVN0YXRlKCcnKVxuXG4gICAgICAgIGNvbnN0IGhhbmRsZVN1Ym1pdCA9IGFzeW5jIChlOiBSZWFjdC5Gb3JtRXZlbnQpID0+IHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgICBcbiAgICAgICAgICBhd2FpdCBmZXRjaCgnL2FwaS9wcm9qZWN0cycsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IFxuICAgICAgICAgICAgICBuYW1lOiB0ZXN0UHJvamVjdHMua2l0Y2hlblJlbm8ubmFtZSxcbiAgICAgICAgICAgICAgY29udHJhY3RvcjogdGVzdFByb2plY3RzLmtpdGNoZW5SZW5vLmNvbnRyYWN0b3IsXG4gICAgICAgICAgICAgIGFyY2hpdGVjdDogYXJjaGl0ZWN0IHx8IHVuZGVmaW5lZFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgPGZvcm0gb25TdWJtaXQ9e2hhbmRsZVN1Ym1pdH0+XG4gICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkFyY2hpdGVjdC9EZXNpZ25lciAob3B0aW9uYWwpXCJcbiAgICAgICAgICAgICAgdmFsdWU9e2FyY2hpdGVjdH1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRBcmNoaXRlY3QoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiPkFkZCB0byBQcm9qZWN0PC9idXR0b24+XG4gICAgICAgICAgPC9mb3JtPlxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIG1vY2tGZXRjaC5tb2NrUmVzb2x2ZWRWYWx1ZShuZXcgUmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBpZDogJ25ldy1wcm9qZWN0LTEyMycsXG4gICAgICAgIG5hbWU6IHRlc3RQcm9qZWN0cy5raXRjaGVuUmVuby5uYW1lLFxuICAgICAgICBjb250cmFjdG9yOiB0ZXN0UHJvamVjdHMua2l0Y2hlblJlbm8uY29udHJhY3RvcixcbiAgICAgICAgYXJjaGl0ZWN0OiB0ZXN0UHJvamVjdHMua2l0Y2hlblJlbm8uYXJjaGl0ZWN0XG4gICAgICB9KSwgeyBzdGF0dXM6IDIwMSB9KSlcblxuICAgICAgcmVuZGVyKDxNb2NrQXJjaGl0ZWN0Rm9ybSAvPilcblxuICAgICAgLy8gV2hlbjogSSBvcHRpb25hbGx5IGFkZCBhbiBhcmNoaXRlY3RcbiAgICAgIGNvbnN0IGFyY2hpdGVjdElucHV0ID0gc2NyZWVuLmdldEJ5UGxhY2Vob2xkZXJUZXh0KC9BcmNoaXRlY3RcXC9EZXNpZ25lci8pXG4gICAgICBmaXJlRXZlbnQuY2hhbmdlKGFyY2hpdGVjdElucHV0LCB7IHRhcmdldDogeyB2YWx1ZTogdGVzdFByb2plY3RzLmtpdGNoZW5SZW5vLmFyY2hpdGVjdCB9IH0pXG5cbiAgICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL0FkZCB0byBQcm9qZWN0LyB9KVxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHN1Ym1pdEJ1dHRvbilcblxuICAgICAgLy8gVGhlbjogdGhlIGFyY2hpdGVjdCBzaG91bGQgYmUgaW5jbHVkZWQgaW4gdGhlIHByb2plY3RcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QobW9ja0ZldGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL2FwaS9wcm9qZWN0cycsIHtcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IFxuICAgICAgICAgICAgbmFtZTogdGVzdFByb2plY3RzLmtpdGNoZW5SZW5vLm5hbWUsXG4gICAgICAgICAgICBjb250cmFjdG9yOiB0ZXN0UHJvamVjdHMua2l0Y2hlblJlbm8uY29udHJhY3RvcixcbiAgICAgICAgICAgIGFyY2hpdGVjdDogdGVzdFByb2plY3RzLmtpdGNoZW5SZW5vLmFyY2hpdGVjdFxuICAgICAgICAgIH0pLFxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9KVxuXG4gICAgdGVzdCgnR2l2ZW4gSSBhbSBjcmVhdGluZyBwcm9qZWN0LCBXaGVuIEkgc2tpcCBhZGRpbmcgYXJjaGl0ZWN0LCBUaGVuIHByb2plY3QgaXMgY3JlYXRlZCB3aXRob3V0IGFyY2hpdGVjdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEdpdmVuOiBJIGFtIGNyZWF0aW5nIGEgcHJvamVjdCBhbmQgc2tpcCBhcmNoaXRlY3RcbiAgICAgIGNvbnN0IE1vY2tTa2lwQXJjaGl0ZWN0Rm9ybSA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgaGFuZGxlU3VibWl0ID0gYXN5bmMgKGU6IFJlYWN0LkZvcm1FdmVudCkgPT4ge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgIFxuICAgICAgICAgIGF3YWl0IGZldGNoKCcvYXBpL3Byb2plY3RzJywge1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgXG4gICAgICAgICAgICAgIG5hbWU6IHRlc3RQcm9qZWN0cy5raXRjaGVuUmVuby5uYW1lLFxuICAgICAgICAgICAgICBjb250cmFjdG9yOiB0ZXN0UHJvamVjdHMua2l0Y2hlblJlbm8uY29udHJhY3RvcixcbiAgICAgICAgICAgICAgYXJjaGl0ZWN0OiB1bmRlZmluZWRcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxmb3JtIG9uU3VibWl0PXtoYW5kbGVTdWJtaXR9PlxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCJBcmNoaXRlY3QvRGVzaWduZXIgKG9wdGlvbmFsKVwiIC8+XG4gICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIj5Ta2lwIEFyY2hpdGVjdDwvYnV0dG9uPlxuICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICBtb2NrRmV0Y2gubW9ja1Jlc29sdmVkVmFsdWUobmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgaWQ6ICduZXctcHJvamVjdC0xMjMnLFxuICAgICAgICBuYW1lOiB0ZXN0UHJvamVjdHMua2l0Y2hlblJlbm8ubmFtZSxcbiAgICAgICAgY29udHJhY3RvcjogdGVzdFByb2plY3RzLmtpdGNoZW5SZW5vLmNvbnRyYWN0b3JcbiAgICAgIH0pLCB7IHN0YXR1czogMjAxIH0pKVxuXG4gICAgICByZW5kZXIoPE1vY2tTa2lwQXJjaGl0ZWN0Rm9ybSAvPilcblxuICAgICAgLy8gV2hlbjogSSBza2lwIGFkZGluZyBhbiBhcmNoaXRlY3RcbiAgICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL1NraXAgQXJjaGl0ZWN0LyB9KVxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHN1Ym1pdEJ1dHRvbilcblxuICAgICAgLy8gVGhlbjogdGhlIHByb2plY3Qgc2hvdWxkIGJlIGNyZWF0ZWQgd2l0aG91dCBhbiBhcmNoaXRlY3RcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QobW9ja0ZldGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL2FwaS9wcm9qZWN0cycsIHtcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IFxuICAgICAgICAgICAgbmFtZTogdGVzdFByb2plY3RzLmtpdGNoZW5SZW5vLm5hbWUsXG4gICAgICAgICAgICBjb250cmFjdG9yOiB0ZXN0UHJvamVjdHMua2l0Y2hlblJlbm8uY29udHJhY3RvcixcbiAgICAgICAgICAgIGFyY2hpdGVjdDogdW5kZWZpbmVkXG4gICAgICAgICAgfSksXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0pXG4gIH0pXG5cbiAgLyoqXG4gICAqIFVzZXIgU3Rvcnk6IFVTLTA3IC0gQWRkIFByb2plY3QgTWFuYWdlciAoT3B0aW9uYWwpXG4gICAqIFwiQXMgYSBob21lb3duZXIgd2hvIHdhbnRzIHRvIGluaXRpYXRlIGEgbmV3IHByb2plY3QgaW4gTmFpbGl0LFxuICAgKiBJIHdhbnQgdG8gb3B0aW9uYWxseSBhZGQgYSBwcm9qZWN0IG1hbmFnZXIsXG4gICAqIHNvIHRoZXkgY2FuIGJlIGluY2x1ZGVkIGluIHRoZSBwcm9qZWN0IGNvbW11bmljYXRpb25zLlwiXG4gICAqL1xuICBkZXNjcmliZSgnVXNlciBTdG9yeTogQWRkIFByb2plY3QgTWFuYWdlciAoT3B0aW9uYWwpJywgKCkgPT4ge1xuICAgIHRlc3QoJ0dpdmVuIEkgYW0gY3JlYXRpbmcgcHJvamVjdCwgV2hlbiBJIG9wdGlvbmFsbHkgYWRkIHByb2plY3QgbWFuYWdlciwgVGhlbiBQTSBpcyBpbmNsdWRlZCBpbiBwcm9qZWN0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gR2l2ZW46IEkgYW0gY3JlYXRpbmcgYSBwcm9qZWN0ICBcbiAgICAgIGNvbnN0IE1vY2tQTUZvcm0gPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IFtwcm9qZWN0TWFuYWdlciwgc2V0UHJvamVjdE1hbmFnZXJdID0gUmVhY3QudXNlU3RhdGUoJycpXG5cbiAgICAgICAgY29uc3QgaGFuZGxlU3VibWl0ID0gYXN5bmMgKGU6IFJlYWN0LkZvcm1FdmVudCkgPT4ge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgIFxuICAgICAgICAgIGF3YWl0IGZldGNoKCcvYXBpL3Byb2plY3RzJywge1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgXG4gICAgICAgICAgICAgIG5hbWU6IHRlc3RQcm9qZWN0cy5kZWNrQWRkaXRpb24ubmFtZSxcbiAgICAgICAgICAgICAgY29udHJhY3RvcjogdGVzdFByb2plY3RzLmRlY2tBZGRpdGlvbi5jb250cmFjdG9yLFxuICAgICAgICAgICAgICBwcm9qZWN0TWFuYWdlcjogcHJvamVjdE1hbmFnZXIgfHwgdW5kZWZpbmVkXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8Zm9ybSBvblN1Ym1pdD17aGFuZGxlU3VibWl0fT5cbiAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUHJvamVjdCBNYW5hZ2VyIChvcHRpb25hbClcIlxuICAgICAgICAgICAgICB2YWx1ZT17cHJvamVjdE1hbmFnZXJ9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0UHJvamVjdE1hbmFnZXIoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiPkFkZCBQTSB0byBQcm9qZWN0PC9idXR0b24+XG4gICAgICAgICAgPC9mb3JtPlxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIG1vY2tGZXRjaC5tb2NrUmVzb2x2ZWRWYWx1ZShuZXcgUmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBpZDogJ25ldy1wcm9qZWN0LTEyMycsXG4gICAgICAgIG5hbWU6IHRlc3RQcm9qZWN0cy5kZWNrQWRkaXRpb24ubmFtZSxcbiAgICAgICAgY29udHJhY3RvcjogdGVzdFByb2plY3RzLmRlY2tBZGRpdGlvbi5jb250cmFjdG9yLFxuICAgICAgICBwcm9qZWN0TWFuYWdlcjogdGVzdFByb2plY3RzLmRlY2tBZGRpdGlvbi5wcm9qZWN0TWFuYWdlclxuICAgICAgfSksIHsgc3RhdHVzOiAyMDEgfSkpXG5cbiAgICAgIHJlbmRlcig8TW9ja1BNRm9ybSAvPilcblxuICAgICAgLy8gV2hlbjogSSBvcHRpb25hbGx5IGFkZCBhIHByb2plY3QgbWFuYWdlclxuICAgICAgY29uc3QgcG1JbnB1dCA9IHNjcmVlbi5nZXRCeVBsYWNlaG9sZGVyVGV4dCgvUHJvamVjdCBNYW5hZ2VyLylcbiAgICAgIGZpcmVFdmVudC5jaGFuZ2UocG1JbnB1dCwgeyB0YXJnZXQ6IHsgdmFsdWU6IHRlc3RQcm9qZWN0cy5kZWNrQWRkaXRpb24ucHJvamVjdE1hbmFnZXIgfSB9KVxuXG4gICAgICBjb25zdCBzdWJtaXRCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9BZGQgUE0gdG8gUHJvamVjdC8gfSlcbiAgICAgIGZpcmVFdmVudC5jbGljayhzdWJtaXRCdXR0b24pXG5cbiAgICAgIC8vIFRoZW46IHRoZSBwcm9qZWN0IG1hbmFnZXIgc2hvdWxkIGJlIGluY2x1ZGVkIGluIHRoZSBwcm9qZWN0XG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KG1vY2tGZXRjaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJy9hcGkvcHJvamVjdHMnLCB7XG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBcbiAgICAgICAgICAgIG5hbWU6IHRlc3RQcm9qZWN0cy5kZWNrQWRkaXRpb24ubmFtZSxcbiAgICAgICAgICAgIGNvbnRyYWN0b3I6IHRlc3RQcm9qZWN0cy5kZWNrQWRkaXRpb24uY29udHJhY3RvcixcbiAgICAgICAgICAgIHByb2plY3RNYW5hZ2VyOiB0ZXN0UHJvamVjdHMuZGVja0FkZGl0aW9uLnByb2plY3RNYW5hZ2VyXG4gICAgICAgICAgfSksXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0pXG4gIH0pXG5cbiAgLyoqXG4gICAqIEVycm9yIEhhbmRsaW5nIGFuZCBWYWxpZGF0aW9uXG4gICAqL1xuICBkZXNjcmliZSgnRXJyb3IgSGFuZGxpbmcnLCAoKSA9PiB7XG4gICAgdGVzdCgnR2l2ZW4gaW52YWxpZCBwcm9qZWN0IGRhdGEsIFdoZW4gSSBzdWJtaXQgZm9ybSwgVGhlbiB2YWxpZGF0aW9uIGVycm9ycyBhcmUgc2hvd24nLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBHaXZlbjogSSBoYXZlIGEgZm9ybSB3aXRoIHZhbGlkYXRpb25cbiAgICAgIGNvbnN0IE1vY2tWYWxpZGF0aW9uRm9ybSA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSBSZWFjdC51c2VTdGF0ZSgnJylcblxuICAgICAgICBjb25zdCBoYW5kbGVTdWJtaXQgPSBhc3luYyAoZTogUmVhY3QuRm9ybUV2ZW50KSA9PiB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvcHJvamVjdHMnLCB7XG4gICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBuYW1lOiAnJywgY29udHJhY3RvcjogJycgfSksIC8vIEludmFsaWQgZGF0YVxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKClcbiAgICAgICAgICAgICAgc2V0RXJyb3IoZXJyb3JEYXRhLmVycm9yKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgc2V0RXJyb3IoJ05ldHdvcmsgZXJyb3InKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgPGZvcm0gb25TdWJtaXQ9e2hhbmRsZVN1Ym1pdH0+XG4gICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIj5TdWJtaXQgSW52YWxpZCBEYXRhPC9idXR0b24+XG4gICAgICAgICAgICB7ZXJyb3IgJiYgPGRpdiByb2xlPVwiYWxlcnRcIj57ZXJyb3J9PC9kaXY+fVxuICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICAvLyBNb2NrIHZhbGlkYXRpb24gZXJyb3IgcmVzcG9uc2VcbiAgICAgIG1vY2tGZXRjaC5tb2NrUmVzb2x2ZWRWYWx1ZShuZXcgUmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBlcnJvcjogJ1ZhbGlkYXRpb24gZmFpbGVkJyxcbiAgICAgICAgZmllbGRFcnJvcnM6IHtcbiAgICAgICAgICBuYW1lOiBbJ1Byb2plY3QgbmFtZSBpcyByZXF1aXJlZCddLFxuICAgICAgICAgIGNvbnRyYWN0b3I6IFsnQ29udHJhY3RvciBpcyByZXF1aXJlZCddLFxuICAgICAgICB9XG4gICAgICB9KSwgeyBzdGF0dXM6IDQwMCB9KSlcblxuICAgICAgcmVuZGVyKDxNb2NrVmFsaWRhdGlvbkZvcm0gLz4pXG5cbiAgICAgIC8vIFdoZW46IEkgc3VibWl0IGludmFsaWQgZGF0YVxuICAgICAgY29uc3Qgc3VibWl0QnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvU3VibWl0IEludmFsaWQgRGF0YS8gfSlcbiAgICAgIGZpcmVFdmVudC5jbGljayhzdWJtaXRCdXR0b24pXG5cbiAgICAgIC8vIFRoZW46IHZhbGlkYXRpb24gZXJyb3JzIHNob3VsZCBiZSBzaG93blxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlSb2xlKCdhbGVydCcpKS50b0hhdmVUZXh0Q29udGVudCgnVmFsaWRhdGlvbiBmYWlsZWQnKVxuICAgICAgfSlcbiAgICB9KVxuICB9KVxufSkgIl0sIm5hbWVzIjpbImplc3QiLCJtb2NrIiwidXNlU2Vzc2lvbiIsImZuIiwidXNlUm91dGVyIiwiZ2xvYmFsIiwiZmV0Y2giLCJkZXNjcmliZSIsIm1vY2tQdXNoIiwibW9ja1VzZVNlc3Npb24iLCJtb2NrVXNlUm91dGVyIiwibW9ja0ZldGNoIiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJtb2NrUmV0dXJuVmFsdWUiLCJwdXNoIiwiZGF0YSIsInVzZXIiLCJ0ZXN0VXNlcnMiLCJqb2huIiwic3RhdHVzIiwidXBkYXRlIiwidGVzdCIsIk1vY2tQcm9qZWN0Rm9ybSIsIm5hbWUiLCJzZXROYW1lIiwiUmVhY3QiLCJ1c2VTdGF0ZSIsImlzU3VibWl0dGluZyIsInNldElzU3VibWl0dGluZyIsImhhbmRsZVN1Ym1pdCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInJlc3BvbnNlIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiY29udHJhY3RvciIsIm9rIiwiZm9ybSIsIm9uU3VibWl0IiwiaW5wdXQiLCJ0eXBlIiwicGxhY2Vob2xkZXIiLCJ2YWx1ZSIsIm9uQ2hhbmdlIiwidGFyZ2V0IiwicmVxdWlyZWQiLCJidXR0b24iLCJkaXNhYmxlZCIsIm1vY2tSZXNvbHZlZFZhbHVlIiwiUmVzcG9uc2UiLCJpZCIsInRlc3RQcm9qZWN0cyIsImtpdGNoZW5SZW5vIiwicmVkaXJlY3RVcmwiLCJyZW5kZXIiLCJuYW1lSW5wdXQiLCJzY3JlZW4iLCJnZXRCeVBsYWNlaG9sZGVyVGV4dCIsImZpcmVFdmVudCIsImNoYW5nZSIsInN1Ym1pdEJ1dHRvbiIsImdldEJ5Um9sZSIsImNsaWNrIiwid2FpdEZvciIsImV4cGVjdCIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwiTW9ja0NvbnRyYWN0b3JGb3JtIiwic2V0Q29udHJhY3RvciIsImNvbnRyYWN0b3JJbnB1dCIsIk1vY2tBcmNoaXRlY3RGb3JtIiwiYXJjaGl0ZWN0Iiwic2V0QXJjaGl0ZWN0IiwidW5kZWZpbmVkIiwiYXJjaGl0ZWN0SW5wdXQiLCJNb2NrU2tpcEFyY2hpdGVjdEZvcm0iLCJNb2NrUE1Gb3JtIiwicHJvamVjdE1hbmFnZXIiLCJzZXRQcm9qZWN0TWFuYWdlciIsImRlY2tBZGRpdGlvbiIsInBtSW5wdXQiLCJNb2NrVmFsaWRhdGlvbkZvcm0iLCJlcnJvciIsInNldEVycm9yIiwiZXJyb3JEYXRhIiwianNvbiIsImVyciIsImRpdiIsInJvbGUiLCJmaWVsZEVycm9ycyIsInRvSGF2ZVRleHRDb250ZW50Il0sIm1hcHBpbmdzIjoiQUFBQTs7O0NBR0M7QUFrQkQsMkJBQTJCO0FBQzNCQSxLQUFLQyxJQUFJLENBQUMsbUJBQW1CLElBQU8sQ0FBQTtRQUNsQ0MsWUFBWUYsS0FBS0csRUFBRTtJQUNyQixDQUFBO0FBRUFILEtBQUtDLElBQUksQ0FBQyxtQkFBbUIsSUFBTyxDQUFBO1FBQ2xDRyxXQUFXSixLQUFLRyxFQUFFO0lBQ3BCLENBQUE7Ozs7OzhEQXZCa0I7d0JBQ2lDO3dCQUN4Qjs0QkFDRDswQkFXbkI7Ozs7OztBQVdQLHNCQUFzQjtBQUN0QkUsT0FBT0MsS0FBSyxHQUFHTixLQUFLRyxFQUFFO0FBRXRCSSxTQUFTLCtCQUErQjtJQUN0QyxNQUFNQyxXQUFXUixLQUFLRyxFQUFFO0lBQ3hCLE1BQU1NLGlCQUFpQlAsa0JBQVU7SUFDakMsTUFBTVEsZ0JBQWdCTixxQkFBUztJQUMvQixNQUFNTyxZQUFZTDtJQUVsQk0sV0FBVztRQUNUWixLQUFLYSxhQUFhO1FBQ2xCSCxjQUFjSSxlQUFlLENBQUM7WUFBRUMsTUFBTVA7UUFBUztRQUMvQ0MsZUFBZUssZUFBZSxDQUFDO1lBQzdCRSxNQUFNO2dCQUFFQyxNQUFNQyxtQkFBUyxDQUFDQyxJQUFJO1lBQUM7WUFDN0JDLFFBQVE7WUFDUkMsUUFBUXJCLEtBQUtHLEVBQUU7UUFDakI7SUFDRjtJQUVBOzs7OztHQUtDLEdBQ0RJLFNBQVMsNEJBQTRCO1FBQ25DZSxLQUFLLDZIQUE2SDtZQUNoSSx3Q0FBd0M7WUFDeEMsTUFBTUMsa0JB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