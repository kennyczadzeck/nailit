(()=>{var a={};a.id=831,a.ids=[831],a.modules={3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},13700:(a,b,c)=>{"use strict";c.d(b,{z:()=>e});var d=c(96330);let e=globalThis.prisma??(()=>{let a="postgresql://neondb_owner:npg_avELx8uqOAc0@ep-still-paper-a5tgtem8-pooler.us-east-2.aws.neon.tech/neondb?sslmode=require".trim();if(!a)throw console.error("DATABASE_URL environment variable is not set"),console.error("Available env vars:",Object.keys(process.env).filter(a=>a.includes("DATABASE")||a.includes("NEON"))),Error("DATABASE_URL environment variable is required");return console.log("Creating Prisma client with DATABASE_URL:",a.substring(0,30)+"..."),new d.PrismaClient({datasources:{db:{url:a}},log:["error","warn"]})})()},29294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},48840:(a,b,c)=>{"use strict";c.r(b),c.d(b,{patchFetch:()=>o,routeModule:()=>k,serverHooks:()=>n,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>m});var d={};c.r(d),c.d(d,{GET:()=>j});var e=c(96559),f=c(48088),g=c(37719),h=c(32190),i=c(13700);async function j(a){try{let{searchParams:b}=new URL(a.url),c=b.get("projectId");if(!c)return h.NextResponse.json({error:"Project ID is required"},{status:400});let d=(await i.z.timelineEntry.findMany({where:{projectId:c},include:{flaggedItem:{select:{emailFrom:!0,originalEmail:!0}}},orderBy:{date:"desc"}})).map(a=>({id:a.id,title:a.title,description:a.description,category:a.category.toLowerCase(),date:a.date.toISOString().split("T")[0],time:function(a){let b=Math.floor((new Date().getTime()-a.getTime())/864e5);if(0===b)return"Today";if(1===b)return"Yesterday";if(b<7)return`${b} days ago`;if(b<30){let a=Math.floor(b/7);return`${a} week${1===a?"":"s"} ago`}{let a=Math.floor(b/30);return`${a} month${1===a?"":"s"} ago`}}(a.date),impact:a.impact||"",cost:a.cost,scheduleImpact:a.scheduleImpact,scopeDetails:a.scopeDetails,verified:a.verified,fromFlaggedItem:!!a.flaggedItemId,emailFrom:a.flaggedItem?.emailFrom||null,createdAt:a.createdAt.toISOString()}));return h.NextResponse.json(d)}catch(a){return console.error("Error fetching timeline entries:",a),h.NextResponse.json({error:"Failed to fetch timeline entries"},{status:500})}}let k=new e.AppRouteRouteModule({definition:{kind:f.RouteKind.APP_ROUTE,page:"/api/timeline/route",pathname:"/api/timeline",filename:"route",bundlePath:"app/api/timeline/route"},distDir:".next",projectDir:"",resolvedPagePath:"/Users/kennyc/code/personal/nailit/app/api/timeline/route.ts",nextConfigOutput:"",userland:d}),{workAsyncStorage:l,workUnitAsyncStorage:m,serverHooks:n}=k;function o(){return(0,g.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:m})}},63033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},96330:a=>{"use strict";a.exports=require("@prisma/client")},96487:()=>{}};var b=require("../../../webpack-runtime.js");b.C(a);var c=a=>b(b.s=a),d=b.X(0,[7719,580],()=>c(48840));module.exports=d})();