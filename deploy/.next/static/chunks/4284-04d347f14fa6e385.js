"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4284],{2885:(e,s,t)=>{t.d(s,{V:()=>w});var a=t(5155),r=t(2115),l=t(6874),n=t.n(l),i=t(5695),c=t(2108),d=t(4143),m=t(5039),x=t(9994),o=t(2771),h=t(4307),u=t(7186),g=t(5433),f=t(5494),j=t(3418),p=t(6678),b=t(5596),y=t(4500),v=t(9598);let N=[{name:"Dashboard",href:"/dashboard",icon:x.A},{name:"Timeline",href:"/timeline",icon:o.A},{name:"Flagged Items",href:"/flagged",icon:h.A},{name:"Project Settings",href:"/settings",icon:u.A}],w=()=>{var e,s,t,l,x,o;let h=(0,i.usePathname)(),{data:u}=(0,c.useSession)(),{currentProject:w,projects:A,loading:k,switchProject:C}=(0,m.B)(),[S,P]=(0,r.useState)(!1),[I,E]=(0,r.useState)(!1),[z,D]=(0,r.useState)(!1),H=e=>{C(e),E(!1),D(!1),window.location.reload()},V=()=>{(0,c.signOut)({callbackUrl:"/welcome"})},B=()=>{D(!1)};return(0,a.jsxs)("nav",{className:"bg-white border-b border-gray-200",children:[(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between h-16",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0 flex items-center",children:(0,a.jsxs)(n(),{href:"/",className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-[#34A853] rounded-md flex items-center justify-center",children:(0,a.jsxs)("svg",{className:"w-5 h-5 text-white",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,a.jsx)("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),(0,a.jsx)("polyline",{points:"9 22 9 12 15 12 15 22"}),(0,a.jsx)("path",{d:"M6 18l3-3 3 3"})]})}),(0,a.jsx)("span",{className:"text-xl font-bold text-gray-900",children:"NailIt"})]})}),u&&A.length>0&&(0,a.jsxs)("div",{className:"ml-6 hidden sm:flex items-center relative",children:[(0,a.jsxs)("button",{onClick:()=>E(!I),className:"flex items-center gap-2 px-3 py-2 text-gray-700 hover:text-gray-900 hover:bg-gray-50 rounded-md border border-gray-200 min-h-[44px]",children:[(0,a.jsx)(g.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm font-medium max-w-32 truncate",children:k?"Loading...":(null==w?void 0:w.name)||"Select Project"}),(null==w?void 0:w.status)==="ARCHIVED"&&(0,a.jsx)(f.A,{className:"w-3 h-3 text-amber-500"}),(0,a.jsx)(j.A,{className:"w-4 h-4"})]}),I&&(0,a.jsxs)("div",{className:"absolute left-0 top-12 w-72 bg-white rounded-md shadow-lg py-1 z-50 border border-gray-200",children:[(0,a.jsx)("div",{className:"px-3 py-2 text-xs font-medium text-gray-500 uppercase tracking-wide border-b border-gray-100",children:"Switch Project"}),(0,a.jsx)("div",{className:"max-h-64 overflow-y-auto",children:A.map(e=>(0,a.jsx)("button",{onClick:()=>H(e.id),className:(0,d.cn)("block w-full text-left px-3 py-3 text-sm hover:bg-gray-100 min-h-[44px]",(null==w?void 0:w.id)===e.id?"bg-gray-50":""),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(g.A,{className:"w-4 h-4 text-gray-400"}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:e.name}),"ARCHIVED"===e.status&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs bg-amber-100 text-amber-800",children:[(0,a.jsx)(f.A,{className:"w-3 h-3"}),"Archived"]})]}),(null==w?void 0:w.id)===e.id&&(0,a.jsx)("div",{className:"w-2 h-2 bg-[#34A853] rounded-full"})]})},e.id))})]})]}),(0,a.jsx)("div",{className:"hidden md:ml-6 md:flex md:space-x-8",children:N.map(e=>{let s=h===e.href;return(0,a.jsxs)(n(),{href:e.href,className:(0,d.cn)("inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium min-h-[44px]",s?"border-[#34A853] text-gray-900":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"),children:[(0,a.jsx)(e.icon,{className:"w-4 h-4 mr-2"}),e.name]},e.name)})})]}),(0,a.jsxs)("div",{className:"hidden sm:flex items-center relative",children:[(0,a.jsxs)("button",{onClick:()=>P(!S),className:"flex items-center gap-2 text-gray-500 hover:text-gray-700 px-3 py-2 rounded-md min-h-[44px]",children:[(null==u||null==(e=u.user)?void 0:e.image)?(0,a.jsx)("img",{src:u.user.image,alt:u.user.name||"User",className:"w-6 h-6 rounded-full"}):(0,a.jsx)(p.A,{className:"w-6 h-6"}),(0,a.jsx)("span",{className:"text-sm font-medium hidden lg:block",children:(null==u||null==(s=u.user)?void 0:s.name)||"Account"}),(0,a.jsx)(j.A,{className:"w-4 h-4"})]}),S&&(0,a.jsxs)("div",{className:"absolute right-0 top-12 w-48 bg-white rounded-md shadow-lg py-1 z-50 border border-gray-200",children:[(0,a.jsx)("div",{className:"px-4 py-2 text-sm text-gray-500 border-b border-gray-100",children:null==u||null==(t=u.user)?void 0:t.email}),(0,a.jsx)(n(),{href:"/account",className:"block px-4 py-3 text-sm text-gray-700 hover:bg-gray-100 min-h-[44px]",onClick:()=>P(!1),children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(p.A,{className:"w-4 h-4"}),"Account Settings"]})}),(0,a.jsx)("button",{onClick:V,className:"block w-full text-left px-4 py-3 text-sm text-gray-700 hover:bg-gray-100 min-h-[44px]",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(b.A,{className:"w-4 h-4"}),"Sign Out"]})})]})]}),(0,a.jsx)("div",{className:"flex items-center sm:hidden",children:(0,a.jsxs)("button",{onClick:()=>D(!z),className:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-[#34A853] min-h-[44px] min-w-[44px]",children:[(0,a.jsx)("span",{className:"sr-only",children:"Open main menu"}),z?(0,a.jsx)(y.A,{className:"block h-6 w-6"}):(0,a.jsx)(v.A,{className:"block h-6 w-6"})]})})]})}),z&&(0,a.jsxs)("div",{className:"sm:hidden",children:[(0,a.jsx)("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-25",onClick:B}),(0,a.jsxs)("div",{className:"fixed inset-y-0 left-0 z-50 w-full max-w-sm bg-white shadow-xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-[#34A853] rounded-md flex items-center justify-center",children:(0,a.jsxs)("svg",{className:"w-5 h-5 text-white",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,a.jsx)("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),(0,a.jsx)("polyline",{points:"9 22 9 12 15 12 15 22"}),(0,a.jsx)("path",{d:"M6 18l3-3 3 3"})]})}),(0,a.jsx)("span",{className:"text-xl font-bold text-gray-900",children:"NailIt"})]}),(0,a.jsx)("button",{onClick:B,className:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 min-h-[44px] min-w-[44px]",children:(0,a.jsx)(y.A,{className:"h-6 w-6"})})]}),u&&A.length>0&&(0,a.jsxs)("div",{className:"px-4 py-3 border-b border-gray-200",children:[(0,a.jsx)("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-2",children:"Current Project"}),(0,a.jsxs)("button",{onClick:()=>E(!I),className:"flex items-center justify-between w-full px-3 py-3 text-gray-700 hover:bg-gray-50 rounded-md border border-gray-200 min-h-[44px]",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(g.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm font-medium truncate",children:k?"Loading...":(null==w?void 0:w.name)||"Select Project"}),(null==w?void 0:w.status)==="ARCHIVED"&&(0,a.jsx)(f.A,{className:"w-3 h-3 text-amber-500"})]}),(0,a.jsx)(j.A,{className:"w-4 h-4"})]}),I&&(0,a.jsx)("div",{className:"mt-2 bg-gray-50 rounded-md",children:A.map(e=>(0,a.jsx)("button",{onClick:()=>H(e.id),className:(0,d.cn)("block w-full text-left px-3 py-3 text-sm hover:bg-gray-100 first:rounded-t-md last:rounded-b-md min-h-[44px]",(null==w?void 0:w.id)===e.id?"bg-gray-100":""),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(g.A,{className:"w-4 h-4 text-gray-400"}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:e.name}),"ARCHIVED"===e.status&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs bg-amber-100 text-amber-800",children:[(0,a.jsx)(f.A,{className:"w-3 h-3"}),"Archived"]})]}),(null==w?void 0:w.id)===e.id&&(0,a.jsx)("div",{className:"w-2 h-2 bg-[#34A853] rounded-full"})]})},e.id))})]}),(0,a.jsx)("div",{className:"px-4 py-3 space-y-1",children:N.map(e=>{let s=h===e.href;return(0,a.jsxs)(n(),{href:e.href,onClick:B,className:(0,d.cn)("flex items-center px-3 py-3 rounded-md text-base font-medium min-h-[44px]",s?"bg-[#34A853] text-white":"text-gray-700 hover:bg-gray-100"),children:[(0,a.jsx)(e.icon,{className:"w-5 h-5 mr-3"}),e.name]},e.name)})}),u&&(0,a.jsxs)("div",{className:"border-t border-gray-200 px-4 py-3",children:[(0,a.jsxs)("div",{className:"flex items-center mb-3",children:[(null==(l=u.user)?void 0:l.image)?(0,a.jsx)("img",{src:u.user.image,alt:u.user.name||"User",className:"w-10 h-10 rounded-full"}):(0,a.jsx)(p.A,{className:"w-10 h-10 text-gray-400"}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("div",{className:"text-base font-medium text-gray-900",children:(null==(x=u.user)?void 0:x.name)||"User"}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:null==(o=u.user)?void 0:o.email})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)(n(),{href:"/account",onClick:B,className:"flex items-center px-3 py-3 rounded-md text-base font-medium text-gray-700 hover:bg-gray-100 min-h-[44px]",children:[(0,a.jsx)(p.A,{className:"w-5 h-5 mr-3"}),"Account Settings"]}),(0,a.jsxs)("button",{onClick:V,className:"flex items-center w-full px-3 py-3 rounded-md text-base font-medium text-gray-700 hover:bg-gray-100 min-h-[44px]",children:[(0,a.jsx)(b.A,{className:"w-5 h-5 mr-3"}),"Sign Out"]})]})]})]})]}),(S||I)&&!z&&(0,a.jsx)("div",{className:"fixed inset-0 z-30",onClick:()=>{P(!1),E(!1)}})]})}},4143:(e,s,t)=>{t.d(s,{cn:()=>l});var a=t(2596),r=t(9688);function l(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.QP)((0,a.$)(s))}},4768:(e,s,t)=>{t.d(s,{$:()=>l});var a=t(5155);t(2115);var r=t(4143);let l=e=>{let{variant:s="primary",size:t="md",className:l,children:n,...i}=e;return(0,a.jsx)("button",{className:(0,r.cn)("inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",{primary:"bg-[#34A853] text-white hover:bg-[#2D9348] focus:ring-[#34A853]",secondary:"bg-[#1A73E8] text-white hover:bg-[#1557B0] focus:ring-[#1A73E8]",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-[#34A853]",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-[#34A853]"}[s],{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[t],l),...i,children:n})}},5039:(e,s,t)=>{t.d(s,{B:()=>i,N:()=>c});var a=t(5155),r=t(2115),l=t(2108);let n=(0,r.createContext)(null),i=()=>{let e=(0,r.useContext)(n);if(!e)throw Error("useProject must be used within a ProjectProvider");return e},c=e=>{let{children:s}=e,{data:t}=(0,l.useSession)(),[i,c]=(0,r.useState)(null),[d,m]=(0,r.useState)([]),[x,o]=(0,r.useState)(!0),h=r.useCallback(async()=>{if(!t)return void o(!1);try{let e=await fetch("/api/projects");if(e.ok){let s=await e.json();m(s);let t=localStorage.getItem("currentProjectId"),a=null;t&&(a=s.find(e=>e.id===t)),a||(a=s.find(e=>"ACTIVE"===e.status)||s[0]),c(a||null),a&&localStorage.setItem("currentProjectId",a.id)}}catch(e){console.error("Error fetching projects:",e)}finally{o(!1)}},[t]),u=async()=>{await h()};return(0,r.useEffect)(()=>{h()},[t,h]),(0,a.jsx)(n.Provider,{value:{currentProject:i,projects:d,loading:x,switchProject:e=>{let s=d.find(s=>s.id===e);s&&(c(s),localStorage.setItem("currentProjectId",s.id))},refreshProjects:u},children:s})}}}]);