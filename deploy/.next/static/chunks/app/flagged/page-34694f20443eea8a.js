(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8823],{184:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(2115);let r=a.forwardRef(function(e,t){let{title:s,titleId:r,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))})},2771:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(2115);let r=a.forwardRef(function(e,t){let{title:s,titleId:r,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))})},2975:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(2115);let r=a.forwardRef(function(e,t){let{title:s,titleId:r,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))})},2994:(e,t,s)=>{"use strict";s.d(t,{Wu:()=>c,ZB:()=>i,Zp:()=>l,aR:()=>n});var a=s(5155);s(2115);var r=s(4143);let l=e=>{let{children:t,className:s,padding:l="md"}=e;return(0,a.jsx)("div",{className:(0,r.cn)("bg-white rounded-lg shadow-sm border border-gray-200",{sm:"p-4",md:"p-6",lg:"p-8"}[l],s),children:t})},n=e=>{let{children:t,className:s}=e;return(0,a.jsx)("div",{className:(0,r.cn)("mb-4",s),children:t})},i=e=>{let{children:t,className:s}=e;return(0,a.jsx)("h3",{className:(0,r.cn)("text-lg font-semibold text-gray-900",s),children:t})},c=e=>{let{children:t,className:s}=e;return(0,a.jsx)("div",{className:(0,r.cn)(s),children:t})}},3418:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(2115);let r=a.forwardRef(function(e,t){let{title:s,titleId:r,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))})},4307:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(2115);let r=a.forwardRef(function(e,t){let{title:s,titleId:r,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3v1.5M3 21v-6m0 0 2.77-.693a9 9 0 0 1 6.208.682l.108.054a9 9 0 0 0 6.086.71l3.114-.732a48.524 48.524 0 0 1-.005-10.499l-3.11.732a9 9 0 0 1-6.085-.711l-.108-.054a9 9 0 0 0-6.208-.682L3 4.5M3 15V4.5"}))})},4500:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(2115);let r=a.forwardRef(function(e,t){let{title:s,titleId:r,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))})},5433:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(2115);let r=a.forwardRef(function(e,t){let{title:s,titleId:r,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"}))})},5494:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(2115);let r=a.forwardRef(function(e,t){let{title:s,titleId:r,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"}))})},5596:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(2115);let r=a.forwardRef(function(e,t){let{title:s,titleId:r,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))})},5628:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(2115);let r=a.forwardRef(function(e,t){let{title:s,titleId:r,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))})},5695:(e,t,s)=>{"use strict";var a=s(8999);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},6678:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(2115);let r=a.forwardRef(function(e,t){let{title:s,titleId:r,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))})},6865:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(2115);let r=a.forwardRef(function(e,t){let{title:s,titleId:r,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))})},7186:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(2115);let r=a.forwardRef(function(e,t){let{title:s,titleId:r,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))})},8004:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var a=s(5155),r=s(2115),l=s(2885),n=s(2994),i=s(4768),c=s(8960),o=s(2771),d=s(2975),m=s(5628),x=s(4500),h=s(6865),u=s(8593);let g=r.forwardRef(function(e,t){let{title:s,titleId:a,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"}))}),f=e=>{var t;let{item:s,isOpen:l,onClose:f,onAction:j,onReclassify:p,isProjectArchived:v=!1}=e,[w,b]=(0,r.useState)(""),[y,N]=(0,r.useState)(!1),[k,E]=(0,r.useState)(!1),[C,A]=(0,r.useState)("cost");if(!l||!s)return null;let L=e=>{switch(e){case"cost":return c.A;case"schedule":return o.A;case"scope":return d.A;default:return m.A}},R=e=>{switch(e){case"cost":return"text-red-600 bg-red-100";case"schedule":return"text-blue-600 bg-blue-100";case"scope":return"text-yellow-600 bg-yellow-100";default:return"text-gray-600 bg-gray-100"}},M=e=>{switch(e){case"cost":return"Cost Impact";case"schedule":return"Schedule Impact";case"scope":return"Scope Impact";case"unclassified":return"Needs Classification";default:return"Unknown"}},Z=L(s.category),W="unclassified"===s.category,S=void 0!==s.aiConfidence&&s.aiConfidence<.7;return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center ".concat(R(s.category)),children:(0,a.jsx)(Z,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:s.title}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-1 text-sm text-gray-600",children:[(0,a.jsxs)("span",{children:["From: ",s.emailFrom]}),(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{children:[s.date," ",s.time]}),(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(R(s.category)),children:M(s.category)}),(W||S)&&!v&&(0,a.jsx)("button",{onClick:()=>E(!0),className:"px-3 py-1.5 rounded-md text-sm font-medium bg-orange-500 text-white hover:bg-orange-600 transition-colors",children:W?"Classify Now":"Reclassify"})]})]})]}),(0,a.jsx)(i.$,{variant:"outline",size:"sm",onClick:f,children:(0,a.jsx)(x.A,{className:"w-4 h-4"})})]}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(W||S)&&(0,a.jsx)(n.Zp,{className:"bg-orange-50 border-orange-200",children:(0,a.jsx)(n.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(m.A,{className:"w-5 h-5 text-orange-600 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-orange-800 mb-1",children:W?"Classification Needed":"Low AI Confidence"}),(0,a.jsx)("p",{className:"text-sm text-orange-700",children:W?"AI detected an important project impact but couldn't classify it. Please review and categorize.":"AI is ".concat(Math.round(100*(s.aiConfidence||0)),"% confident in this classification. Please verify if the category is correct.")})]})]})})}),k&&(0,a.jsxs)(n.Zp,{children:[(0,a.jsx)(n.aR,{children:(0,a.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(d.A,{className:"w-5 h-5"}),W?"Classify Item":"Reclassify Item"]})}),(0,a.jsx)(n.Wu,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select the correct category:"}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-3",children:["cost","schedule","scope"].map(e=>{let t=L(e);return(0,a.jsx)("button",{onClick:()=>A(e),className:"p-3 rounded-lg border-2 transition-colors ".concat(C===e?"border-[#34A853] bg-green-50":"border-gray-200 hover:border-gray-300"),children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center ".concat(R(e)),children:(0,a.jsx)(t,{className:"w-5 h-5"})}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900 capitalize",children:e})]})},e)})})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>E(!1),children:"Cancel"}),(0,a.jsxs)(i.$,{size:"sm",onClick:()=>{p(s.id,C),E(!1)},className:"flex items-center gap-2",children:[(0,a.jsx)(h.A,{className:"w-4 h-4"}),W?"Classify":"Reclassify"]})]})]})})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsx)(n.aR,{children:(0,a.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(m.A,{className:"w-5 h-5 text-orange-500"}),"Detected Change"]})}),(0,a.jsxs)(n.Wu,{children:[(0,a.jsx)("p",{className:"text-gray-700 mb-4",children:s.description}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Category"}),(0,a.jsx)("p",{className:"text-sm text-gray-900",children:M(s.category)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Impact"}),(0,a.jsx)("p",{className:"text-sm text-gray-900",children:s.impact})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Project"}),(0,a.jsx)("p",{className:"text-sm text-gray-900",children:s.project})]})]})]})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsx)(n.aR,{children:(0,a.jsx)(n.ZB,{children:"AI Analysis"})}),(0,a.jsx)(n.Wu,{children:(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Detected Changes:"}),(0,a.jsx)("ul",{className:"list-disc list-inside text-sm text-gray-700 space-y-1",children:null==(t=s.detectedChanges)?void 0:t.map((e,t)=>(0,a.jsx)("li",{children:e},t))})]})})})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsx)(n.aR,{children:(0,a.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(u.A,{className:"w-5 h-5"}),"Email Context"]})}),(0,a.jsx)(n.Wu,{children:(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600 mb-2",children:[(0,a.jsx)("strong",{children:"From:"})," ",s.emailFrom,(0,a.jsx)("br",{}),(0,a.jsx)("strong",{children:"Date:"})," ",s.date,(0,a.jsx)("br",{}),(0,a.jsx)("strong",{children:"Subject:"})," Kitchen Renovation Update"]}),(0,a.jsx)("div",{className:"text-sm text-gray-700",children:(0,a.jsx)("p",{className:"italic",children:s.originalEmail||"Original email content not available"})})]})})]}),y&&(0,a.jsxs)(n.Zp,{children:[(0,a.jsx)(n.aR,{children:(0,a.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(g,{className:"w-5 h-5"}),"Email Response"]})}),(0,a.jsxs)(n.Wu,{children:[(0,a.jsx)("textarea",{value:w,onChange:e=>b(e.target.value),rows:15,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-[#34A853] focus:border-[#34A853] text-sm font-mono"}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,a.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>N(!1),children:"Cancel"}),(0,a.jsxs)(i.$,{size:"sm",onClick:()=>{j(s.id,"email_sent"),N(!1)},className:"flex items-center gap-2",children:[(0,a.jsx)(g,{className:"w-4 h-4"}),"Send Email"]})]})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center p-6 border-t border-gray-200 bg-gray-50",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[s.needsEmailResponse&&!v&&(0,a.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>{b("Subject: Confirmation Required: ".concat(s.title,"\n\nDear ").concat(s.emailFrom.split("@")[0],",\n\nI hope this email finds you well. I'm writing regarding a project update that was mentioned in our recent communication.\n\n**Details:**\n- Category: ").concat(M(s.category),"\n- Description: ").concat(s.description,"\n- Impact: ").concat(s.impact,"\n- Date Mentioned: ").concat(s.date,"\n\n**Confirmation Request:**\nPlease provide additional details so we can properly document this update:\n\nPlease provide:\n").concat("cost"===s.category?"1. Cost details and breakdown\n2. Relation to original budget":"","\n").concat("schedule"===s.category?"1. Timeline details\n2. Relation to project schedule":"","\n").concat("scope"===s.category?"1. Scope details\n2. Relation to original scope":"","\n\nPlease reply to this email with the requested information.\n\nThank you for your attention to this matter.\n\nBest regards,\n[Your Name]\n\n---\nThis email was generated by NailIt to help maintain clear project communication.")),N(!0)},className:"flex items-center gap-2",children:[(0,a.jsx)(g,{className:"w-4 h-4"}),"Generate Email Response"]}),v&&(0,a.jsx)("div",{className:"text-sm text-amber-600",children:"Project archived - actions disabled"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(i.$,{variant:"outline",onClick:()=>j(s.id,"ignore"),className:"text-red-600 border-red-300 hover:bg-red-50",title:"Mark as false positive - helps AI learn to avoid similar flags",disabled:v,children:"Ignore (False Positive)"}),(0,a.jsxs)(i.$,{onClick:()=>j(s.id,"confirm"),className:"flex items-center gap-2",title:"Confirm as valid detection - reinforces AI learning and adds to timeline",disabled:v,children:[(0,a.jsx)(h.A,{className:"w-4 h-4"}),"Add to Timeline"]})]})]})]})})};var j=s(4307),p=s(184);function v(){let[e,t]=(0,r.useState)(null),[s,x]=(0,r.useState)(!1),[h,u]=(0,r.useState)([]),[g,v]=(0,r.useState)(!0),[w,b]=(0,r.useState)(null),[y,N]=(0,r.useState)(null),[k,E]=(0,r.useState)(null);(0,r.useEffect)(()=>{C()},[]);let C=async()=>{try{v(!0);let e=await fetch("/api/projects"),t=await e.json();if(0===t.length)return void u([]);let s=t[0];E(s);let a=await fetch("/api/flagged-items?projectId=".concat(s.id));if(!a.ok)throw Error("Failed to fetch flagged items");let r=await a.json();u(r)}catch(e){console.error("Error fetching flagged items:",e),b(e instanceof Error?e.message:"Failed to fetch flagged items")}finally{v(!1)}},A=e=>{switch(e){case"cost":return c.A;case"schedule":return o.A;case"scope":return d.A;default:return j.A}},L=e=>{switch(e){case"cost":return"text-red-600 bg-red-100";case"schedule":return"text-blue-600 bg-blue-100";case"scope":return"text-yellow-600 bg-yellow-100";default:return"text-gray-600 bg-gray-100"}},R=e=>{switch(e){case"cost":return"Cost Related";case"schedule":return"Schedule Related";case"scope":return"Scope Related";case"unclassified":return"Needs Classification";default:return"Unknown"}},M=e=>{t(e),x(!0)},Z=async(e,s)=>{try{if(N(e),!(await fetch("/api/flagged-items/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:s})})).ok)throw Error("Failed to update flagged item");u(t=>t.filter(t=>t.id!==e)),x(!1),t(null),"confirm"===s?console.log("✅ CONFIRM: Positive ML feedback - AI correctly flagged item ".concat(e)):"ignore"===s?console.log("❌ IGNORE: Negative ML feedback - AI incorrectly flagged item ".concat(e)):"email_sent"===s&&console.log("\uD83D\uDCE7 EMAIL SENT: Pending ML feedback for item ".concat(e," - awaiting clarification"))}catch(e){console.error("Error updating flagged item:",e),alert("Failed to update item. Please try again.")}finally{N(null)}},W=async(e,t)=>{try{if(N(e),!(await fetch("/api/flagged-items/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"reclassify",category:t})})).ok)throw Error("Failed to reclassify item");u(s=>s.map(s=>s.id===e?{...s,category:t,aiConfidence:1}:s)),console.log("\uD83D\uDD04 RECLASSIFY: User corrected classification for item ".concat(e," to ").concat(t))}catch(e){console.error("Error reclassifying item:",e),alert("Failed to reclassify item. Please try again.")}finally{N(null)}};return g?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(l.V,{}),(0,a.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#34A853]"}),(0,a.jsx)("div",{className:"text-gray-600 font-medium",children:"Loading flagged items..."})]})})})]}):w?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(l.V,{}),(0,a.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,a.jsx)("div",{className:"text-red-500 text-6xl",children:"⚠️"}),(0,a.jsx)("div",{className:"text-red-600 font-medium",children:w}),(0,a.jsx)(i.$,{onClick:()=>{b(null),C()},className:"bg-[#34A853] hover:bg-[#2d8f47]",children:"Try Again"})]})})})]}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(l.V,{}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsx)("div",{className:"flex justify-between items-center mb-8",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Flagged Items"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Review messages impacting cost, schedule, or scope"})]})}),(null==k?void 0:k.status)==="ARCHIVED"&&(0,a.jsx)(n.Zp,{className:"bg-amber-50 border-amber-200 mb-8",children:(0,a.jsx)(n.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(m.A,{className:"h-5 w-5 text-amber-400"})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-amber-800",children:"Project Archived"}),(0,a.jsx)("div",{className:"mt-2 text-sm text-amber-700",children:(0,a.jsx)("p",{children:"Project archived. Flagged items are read-only. You can view data but cannot take actions."})})]})]})})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,a.jsx)(n.Zp,{children:(0,a.jsxs)(n.Wu,{className:"flex items-center p-6",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-8 h-8 bg-red-500 rounded-md flex items-center justify-center",children:(0,a.jsx)(c.A,{className:"w-5 h-5 text-white"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Cost Related"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:h.filter(e=>"cost"===e.category).length})]})]})}),(0,a.jsx)(n.Zp,{children:(0,a.jsxs)(n.Wu,{className:"flex items-center p-6",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-md flex items-center justify-center",children:(0,a.jsx)(o.A,{className:"w-5 h-5 text-white"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Schedule Related"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:h.filter(e=>"schedule"===e.category).length})]})]})}),(0,a.jsx)(n.Zp,{children:(0,a.jsxs)(n.Wu,{className:"flex items-center p-6",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-8 h-8 bg-yellow-500 rounded-md flex items-center justify-center",children:(0,a.jsx)(d.A,{className:"w-5 h-5 text-white"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Scope Related"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:h.filter(e=>"scope"===e.category).length})]})]})}),(0,a.jsx)(n.Zp,{children:(0,a.jsxs)(n.Wu,{className:"flex items-center p-6",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-8 h-8 bg-gray-500 rounded-md flex items-center justify-center",children:(0,a.jsx)(j.A,{className:"w-5 h-5 text-white"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Needs Classification"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:h.filter(e=>"unclassified"===e.category).length})]})]})})]}),(0,a.jsx)("div",{className:"space-y-4",children:0===h.length?(0,a.jsx)(n.Zp,{children:(0,a.jsxs)(n.Wu,{className:"text-center py-12",children:[(0,a.jsx)(j.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No flagged items"}),(0,a.jsx)("p",{className:"text-gray-500",children:"All project communications are up to date!"})]})}):h.map(e=>{let t=A(e.category),s=e.aiConfidence&&e.aiConfidence<.7;return(0,a.jsx)(n.Zp,{className:"hover:bg-gray-50 transition-colors",children:(0,a.jsx)(n.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center ".concat(L(e.category)),children:(0,a.jsx)(t,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.title}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:e.emailFrom}),(0,a.jsx)("span",{className:"text-gray-300",children:"•"}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:e.time}),(0,a.jsx)("span",{className:"text-gray-300",children:"•"}),(0,a.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium ".concat(L(e.category)),children:R(e.category)}),e.needsEmailResponse&&(0,a.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Needs Response"}),s&&"unclassified"!==e.category&&(0,a.jsxs)("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:["Low Confidence (",Math.round(100*(e.aiConfidence||0)),"%)"]})]})]}),(0,a.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>M(e),className:"flex items-center gap-2",disabled:y===e.id,children:[y===e.id?(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-400"}):(0,a.jsx)(p.A,{className:"w-4 h-4"}),y===e.id?"Processing...":"View Details"]})]}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:e.description}),(0,a.jsxs)("p",{className:"mt-1 text-sm font-medium text-gray-900",children:["Impact: ",e.impact]})]})]})})},e.id)})})]}),(0,a.jsx)(f,{item:e,isOpen:s,onClose:()=>{x(!1),t(null)},onAction:Z,onReclassify:W,isProjectArchived:(null==k?void 0:k.status)==="ARCHIVED"})]})}},8593:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(2115);let r=a.forwardRef(function(e,t){let{title:s,titleId:r,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))})},8960:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(2115);let r=a.forwardRef(function(e,t){let{title:s,titleId:r,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))})},9369:(e,t,s)=>{Promise.resolve().then(s.bind(s,8004))},9598:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(2115);let r=a.forwardRef(function(e,t){let{title:s,titleId:r,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))})},9994:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(2115);let r=a.forwardRef(function(e,t){let{title:s,titleId:r,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))})}},e=>{var t=t=>e(e.s=t);e.O(0,[4277,2108,6874,4284,8441,1684,7358],()=>t(9369)),_N_E=e.O()}]);